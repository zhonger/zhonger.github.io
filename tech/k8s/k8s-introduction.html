
<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes ‰∏çÂÆåÂÖ®ÂÖ•Èó® - ‰ª≤ÂÑøÁöÑËá™ÁïôÂú∞</title>
    <meta name="author" content="zhonger">
    
    <meta name="description" content="Kubernetes ‰∏çÂÆåÂÖ®ÂÖ•Èó®">
    <meta name="keywords"
        content="Kubernetes, K8S, kubeadm, calico, flannel, csi-driver, NFS">
    
    <meta property="og:previous_url" content="/ac/qc/solve-quantum-chemistry-by-hand-1-1.html">
    
    
    <meta property="og:next_url" content="/tech/algorithm/bus-ticket.html">
    
    
    <meta property="post-date-format" content="0">
    
    <meta property="post-date" content="2024-10-08 16:50:00 +0900" />
    
    
    <meta property="calendar-scale" content="year" />
    <meta property="calendar-scheme" content="null" />
    <meta property="calendar-color" content="null" />
    
    <!-- Open Graph -->
    <meta property="og:title"
        content="Kubernetes ‰∏çÂÆåÂÖ®ÂÖ•Èó® - ‰ª≤ÂÑøÁöÑËá™ÁïôÂú∞">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lisz.me/tech/k8s/k8s-introduction.html">
    <meta property="og:baseurl" content="">
    <meta property="og:description" content="‰∏™‰∫∫ÁöÑ‰∏Ä‰∏™ÊäÄÊúØÂçöÂÆ¢Á´ôÁÇπÔºå‰∏ªË¶ÅÁî®‰∫éËÆ∞ÂΩï‰∏™‰∫∫Âú®Â≠¶‰π†ËøáÁ®ã‰∏≠ÈÅáÂà∞ÁöÑÊäÄÊúØÈóÆÈ¢òÂèäËß£ÂÜ≥ÊñπÊ≥ï„ÄÅÊäÄÊúØÂÆûÈ™åÔºå‰ª•Âèä‰∏Ä‰∫õÊØîËæÉÊúâË∂£ÁöÑ‰∫ãÊÉÖ„ÄÇ">
    <meta property="og:site_name" content="‰ª≤ÂÑøÁöÑËá™ÁïôÂú∞">
    <meta property="og:gray" content="false">
    <meta property="og:lang" content="zh-Hans">
    
    <meta name="alivestart" content="08/08/2015">
    
    
    <meta name="google-site-verification" content="v729JR7Zs4nX-YvgaPeo3p1ise9vTA-6cMhamSu6N5c" />
    
    <meta name="theme-color" content="#81BBFF" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/assets/img/touch/apple-touch-icon.png" />
    <link rel="Shortcut Icon" href="/assets/icons/favicon.ico">
    <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon" />
    <link rel="bookmark" href="/assets/icons/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.min.css" async>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont/style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css/github-markdown-light.min.css">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css">
    
    


<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prism-themes/themes/prism-one-light.min.css" />


<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    

    
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />

    <link rel="stylesheet" href="/assets/css/app.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
</head>
    
    <body class="line-numbers" ontouchstart="">
    
    <!--[if lt IE 10]>
    <div class="alert-danger" role="alert">‰Ω†ÁöÑÊµèËßàÂô®ÂÆûÂú®Â§™Â§™Â§™Êóß‰∫ÜÔºåÊîæÂ≠¶Âà´Ëµ∞ÔºåÂçáÁ∫ßÂÆåÊµèËßàÂô®ÂÜçËØ¥ÔºÅ<a target="_blank" class="alert-link" href="http://browsehappy.com">Á´ãÂç≥ÂçáÁ∫ß</a></div>
    <![endif]-->
        
        
        <div id="all" class="post" data-theme="default">
        
            
            
            <div class="alert-tip" id="no-previous">Â∑≤ÁªèÊòØÊúÄÊñ∞‰∏ÄÁØáÊñáÁ´†‰∫ÜÔºÅ</div>
            <div class="alert-tip" id="no-next">Â∑≤ÁªèÊòØÊúÄÂêé‰∏ÄÁØáÊñáÁ´†‰∫ÜÔºÅ</div>
        
            <input id="nm-switch" type="hidden" value="false">
            <header class="g-header" data-theme="default">
    <div class="g-logo">
      <a href="/" aria-label="logo"></a>
    </div>
    <!-- <i id="menu-toggle" class="iconfont icon-menu"></i> -->
    
        <div id="search-toggle"></div>
    
    
    <div id="random-toggle">
        <a href="#" aria-label="Random Article" target="_blank">üé≤</a>
    </div>
    <div id="travelling-toggle">
        <a href="https://www.travellings.cn/go.html" aria-label="Travelings" target="_blank">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-train-subway"></use>
            </svg>
        </a>
    </div>
    
    <div id="mode-toggle">
        <svg class="icon icon-day" aria-hidden="true">
            <use xlink:href="#icon-day"></use>
        </svg>
        <svg class="icon icon-night" aria-hidden="true">
            <use xlink:href="#icon-night"></use>
        </svg>
    </div>
    <svg id="menu-toggle" class="icon-menu" aria-hidden="true">
        <use xlink:href="#icon-menu"></use>
    </svg>
    <nav class="g-nav">
        <ul>
            
                
                <li>
                    <a href="/" aria-label="home">
                        home
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/blog/index.html" aria-label="blog">
                        blog
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/archives.html" aria-label="archives">
                        archives
                    </a>
                </li>
                
            
                
                <li>
                    <a href="/tags.html" aria-label="tags">
                        tags
                    </a>
                </li>
                
            
                
                <li class="dropdown">
                    <a class="dropdown-toggle" href="javascript:void(0);"> about </a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="/feed.xml" aria-label="RSS">
                                RSS
                            </a>
                        </li>
                    
                        <li>
                            <a href="/logs.html" aria-label="logs">
                                logs
                            </a>
                        </li>
                    
                        <li>
                            <a href="/tos.html" aria-label="tos">
                                tos
                            </a>
                        </li>
                    
                        <li>
                            <a href="/cv.html" aria-label="CV">
                                CV
                            </a>
                        </li>
                    
                        <li>
                            <a href="/links.html" aria-label="links">
                                links
                            </a>
                        </li>
                    
                    </ul> 
                </li>
                
            
                
                <li class="dropdown">
                    <a class="dropdown-toggle" href="javascript:void(0);"> collections </a>
                    <ul class="dropdown-menu">
                    
                        <li>
                            <a href="/tags.html#CONQUEST" aria-label="CONQUEST">
                                CONQUEST
                            </a>
                        </li>
                    
                        <li>
                            <a href="/tags.html#LDAP" aria-label="LDAP">
                                LDAP
                            </a>
                        </li>
                    
                        <li>
                            <a href="/tags.html#blog" aria-label="ÂçöÂÆ¢">
                                ÂçöÂÆ¢
                            </a>
                        </li>
                    
                    </ul> 
                </li>
                
            
            <li class="random">
                <a href="#" aria-label="Random Article" target="_blank">üé≤</a>
            </li>
            
            <li class="travelling">
                <a href="https://www.travellings.cn/go.html" aria-label="Travelings" target="_blank">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-train-subway"></use>
                    </svg>
                </a>
            </li>
            
            <li class="mode">
                <svg class="icon day" aria-hidden="true">
                    <use xlink:href="#icon-day"></use>
                </svg>
                <svg class="icon night" aria-hidden="true">
                    <use xlink:href="#icon-night"></use>
                </svg>
            </li>
            
            <li id="search"></li>
            
        </ul>
    </nav>
</header>

            


<div class="g-banner post-header post-pattern-food bgcolor-default "
    data-theme="default">
    <div class="post-wrapper">
        <div class="post-tags">
            
            
            <a href="/%20/tags.html#Kubernetes" class="post-tag">Kubernetes</a>
            
            <a href="/%20/tags.html#K8S" class="post-tag">K8S</a>
            
            <a href="/%20/tags.html#kubeadm" class="post-tag">kubeadm</a>
            
            <a href="/%20/tags.html#calico" class="post-tag">calico</a>
            
            <a href="/%20/tags.html#flannel" class="post-tag">flannel</a>
            
            <a href="/%20/tags.html#csi-driver" class="post-tag">csi-driver</a>
            
            <a href="/%20/tags.html#NFS" class="post-tag">NFS</a>
            
            
        </div>
        <h1>Kubernetes ‰∏çÂÆåÂÖ®ÂÖ•Èó®</h1>
        <div class="post-meta">
            <span class="post-meta-item">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-user"></use>
                </svg>
                zhonger
            </span>
            <time class="post-meta-item" datetime=" 24-10-08">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-calendar"></use>
                </svg>
                <span class="create-at"></span>
            </time>
            <time class="post-meta-item" datetime=" 24-10-08">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-update"></use>
                </svg>
                <span class="update-at"></span>
            </time>
            <span class="post-meta-item">
                <svg class="icon words" aria-hidden="true">
                    <use xlink:href="#icon-words"></use>
                </svg>
                
                Êú¨ÊñáÊÄªÂÖ±  14.9k  Â≠ó </span>
                    <span class="post-meta-item">
                        <svg class="icon time" aria-hidden="true">
                            <use xlink:href="#icon-time"></use>
                        </svg>
                        ÈòÖËØªÂÖ®ÊñáÂ§ßÁ∫¶ÈúÄË¶Å 43 ÂàÜÈíü
                    </span>
                    
                    <span class="post-meta-item">
                        <svg class="icon pv" aria-hidden="true">
                            <use xlink:href="#icon-pv"></use>
                        </svg>
                        Êú¨ÊñáÊÄªÈòÖËØªÈáè 
                        
                        <span id="busuanzi_page_pv"></span>
                        
                        Ê¨°
                    </span>
                    
                    
                    <span class="post-meta-item">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-image"></use>
                        </svg>
                        
                        Â∞ÅÈù¢ÂõæÁâáÊèê‰æõËÄÖ <a href="https://unsplash.com/@son_of_media" target="_blank">Dylan McLeod</a>
                        
                    </span>
                    
        </div>
    </div>
    
    <div class="filter"></div>
    <div class="post-cover"
        style="background: url('https://i.lisz.top/cover/mkLyvk.webp') center no-repeat; background-size: cover;"></div>
    
</div>

<main class="post-content visible">
    
    <h2 class="post-subtitle">Kubernetes Âü∫Á°ÄÂπ≥Âè∞ÁöÑÊê≠Âª∫</h2>
    

    

    <div class="container">
        
<div class="submenu hidden">

</div>
        <div class="contents">
            <article class="markdown-body post">
                


                <h2 id="ÂâçË®Ä">ÂâçË®Ä</h2>

<p>‚ÄÉ‚ÄÉWeb Â∫îÁî®ÁöÑÁîü‰∫ßÁéØÂ¢ÉÈÉ®ÁΩ≤ÈöèÁùÄÊäÄÊúØÁöÑÂèëÂ±ï‰∏çÊñ≠Âú∞ÂèëÁîüÊîπÂèòÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºå‰ªéÊúÄÊó©ÊúüÁöÑÂçïÊú∫ÁéØÂ¢ÉÂà∞Â§öÊú∫ÁéØÂ¢ÉÔºåÂÜçÂèëÂ±ïÂà∞Â§çÊùÇÁéØÂ¢ÉÔºö</p>

<ul>
  <li>
<strong>ÂçïÊú∫ÁéØÂ¢É</strong>ÊåáÁöÑÊòØ‰ª£Á†Å„ÄÅËøêË°åÁéØÂ¢É„ÄÅÊñá‰ª∂Â≠òÂÇ®„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°ÈÉΩÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤ÊñπÂºè„ÄÇÈÄöÂ∏∏Êù•ËØ¥Ôºå‰∏™‰∫∫Â∫îÁî®ÊàñËÄÖÊó©Êúü Demo Â∫îÁî®Â§ßÂ§öÈááÁî®ËøôÁ±ªÊñπÂºè„ÄÇÂçïÊú∫ÁéØÂ¢ÉÁöÑ‰ºòÁÇπÂú®‰∫é‰∏çÈúÄË¶ÅÂ§™Â§öÊúçÂä°Âô®ËµÑÊ∫êÔºåÁº∫ÁÇπÂú®‰∫éËøáÂàÜ‰æùËµñÊú¨Âú∞ËµÑÊ∫êËÄåÊ≤°ÊúâÈ´òÂèØÁî®ÊÄß„ÄÅÈ´òÂèØÊâ©Â±ïÊÄß‰ª•ÂèäÊï∞ÊçÆÁöÑÂÆâÂÖ®‰øùÈöú„ÄÇÂ¶ÇÊûúÊòØ‰∫ëÊúçÂä°Âô®‰Ωú‰∏∫ÂçïÊú∫ÁéØÂ¢ÉÔºåÂèØ‰ª•ÈÄöËøáÂçáÁ∫ßÈÖçÁΩÆÁöÑÊñπÂºèÊù•ÊèêÈ´ò CPU„ÄÅÂÜÖÂ≠òÂíåÂ≠òÂÇ®ËµÑÊ∫ê„ÄÇËá≥‰∫éÊï∞ÊçÆÂàôÂèØ‰ª•ÈÄöËøáÂºÇÊú∫Â§á‰ªΩÊàñÊú¨Âú∞Â§á‰ªΩÁöÑÊñπÂºèÊù•‰øùÈöúÊï∞ÊçÆÁöÑÂèØÈù†ÊÄß„ÄÇ</li>
  <li>
<strong>Â§öÊú∫ÁéØÂ¢É</strong>ÊåáÁöÑÊòØÂêå‰∏ÄÂ∫îÁî®ÊâÄÈúÄÁöÑËøêË°åÁéØÂ¢É„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°„ÄÅÊñá‰ª∂Â≠òÂÇ®ÊúçÂä°ÂàÜÂ∏ÉÂú®‰∏çÂêåÁöÑËäÇÁÇπÊàñÈõÜÁæ§‰∏≠ÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤ÊñπÂºè„ÄÇËøôÁ±ªÊñπÂºèÁöÑ‰ºòÁÇπËá™ÁÑ∂ÊòØÂÖ∑Â§áÈ´òÂèØÁî®ÊÄß„ÄÅÈ´òÂèØÊâ©Â±ïÊÄß‰ª•ÂèäÂÆåÂ§áÁöÑÊï∞ÊçÆÂÆâÂÖ®‰øùÈöúÔºåÁº∫ÁÇπÂàôÊòØÈúÄË¶ÅÂ§ßÈáèÁöÑÊúçÂä°Âô®ËµÑÊ∫ê„ÄÇÂõ†Ê≠§ÔºåÂ§öÊú∫ÁéØÂ¢ÉÈÄöÂ∏∏ÊòØÂØπÂ§ñÂ§ßÈáèÁî®Êà∑Êèê‰æõÊúçÂä°Êó∂Â∏∏Áî®ÁöÑÊñπÂºè„ÄÇ</li>
  <li>
<strong>Â§çÊùÇÁéØÂ¢É</strong>ÊâìÁ†¥‰∫ÜÂéüÊúâÁöÑÁì∂Áì∂ÁΩêÁΩêÔºåÊòØÂ§öÊú∫ÁéØÂ¢ÉÁöÑ‰∏ÄÁßçÁöÑË∂ÖÁ∫ßÂΩ¢ÊÄÅ„ÄÇÂú®Â§çÊùÇÁéØÂ¢É‰∏≠Ôºå‰∏çÂÜçÊãòÊ≥•‰∫éÊúçÂä°Âô®ËäÇÁÇπÊú¨Ë∫´ÔºåËÄåÊòØÂà©Áî® Web Â∫îÁî®Â∞ÜÂ∑≤ÊúâÁöÑ‰∫ëËµÑÊ∫êËÅîÁ≥ªÂú®‰∏ÄËµ∑„ÄÇËØ¥ÂæóÊõ¥Áõ¥ÁôΩ‰∏ÄÁÇπÔºåÂ∞±ÊòØÂ∫îÁî®ÂºÄÂèëËÄÖ‰∏çÂÜçÈúÄË¶ÅÂÖ≥ÂøÉÂ∫îÁî®ËøêË°åÁéØÂ¢É„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°„ÄÅÊñá‰ª∂Â≠òÂÇ®Á≠âÂü∫Á°ÄÁéØÂ¢ÉÁöÑÈÖçÁΩÆÂíåÁÆ°ÁêÜÔºåÂîØ‰∏ÄÈúÄË¶ÅÂÖ≥ÂøÉÁöÑÂè™ÊúâÂ∫îÁî®‰ª£Á†ÅÊú¨Ë∫´„ÄÇËøô‰πüÊòØÁé∞Âú®Â§ßÈÉ®ÂàÜ Web Â∫îÁî®ÁöÑÁúüÂÆûÈÉ®ÁΩ≤ÊñπÂºè„ÄÇ</li>
</ul>

<p>‚ÄÉ‚ÄÉËá™‰ªé‰ª£Á†ÅÁâàÊú¨Ë∑üË∏™ËΩØ‰ª∂ Git Ê®™Á©∫Âá∫‰∏ñ‰ª•Êù•ÔºåÈÄêÊ≠•ÂΩ¢Êàê‰∫Ü‰ª• Git ‰∏∫‰∏≠ÂøÉÁöÑ<strong>ÊåÅÁª≠ÂºÄÂèë„ÄÅÊåÅÁª≠ÈõÜÊàêÂíåÊåÅÁª≠ÈÉ®ÁΩ≤</strong>ÁöÑÁé∞‰ª£Â∫îÁî®ÂºÄÂèëÊñπÂºè„ÄÇËøô‰∏éÂ§çÊùÇÁéØÂ¢ÉÁöÑÈÉ®ÁΩ≤ÊñπÂºèÂÆåÂÖ®Â•ëÂêàÔºåÁî±‰∫ëÊúçÂä°Êèê‰æõÂïÜÊù•Êèê‰æõÂíåÁª¥Êä§ÂêÑÁ±ªËøêË°åÁéØÂ¢É„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°ÂíåÊñá‰ª∂Â≠òÂÇ®ÔºåÂºÄÂèëÂõ¢ÈòüÂè™ÈúÄË¶Å‰∏ìÊ≥®‰∫éÂØπ‰ª£Á†ÅÂ≠òÂÇ®Â∫ìÁöÑÁÆ°ÁêÜ„ÄÇ</p>

<p>‚ÄÉ‚ÄÉ‰∏æ‰∏™‰æãÂ≠êÔºåÂΩìÊüê‰∏™ÂºÄÂèëÊàêÂëòÂÆåÊàê‰∫ÜÊüê‰∏™Ê®°ÂùóÁöÑÂºÄÂèëÂπ∂Êé®ÈÄÅÂà∞Êüê‰∏™ÂàÜÊîØÔºåËØ•ÂàÜÊîØÂàõÂª∫Âêé‰ºöËá™Âä®Ëß¶ÂèëÊåÅÁª≠ÈõÜÊàêËøõË°åËá™Âä® Review„ÄÇËá™Âä® Review ÈÄöËøáÂêéÔºåÂºÄÂèëÂõ¢ÈòüË¥üË¥£‰∫∫ÂèØ‰ª•ÂØπËØ•ÂàÜÊîØÁöÑ‰ª£Á†ÅÊõ¥ÊîπËøõË°åÂÆ°Ê†∏ÔºåÈÄöËøáÂêéÂÖÅËÆ∏Â∞ÜËØ•ÂàÜÊîØ‰∏éÂÖ∂‰ªñÊüê‰∏™ÊåáÂÆöÂàÜÊîØËøõË°åÂêàÂπ∂ÔºàÂêàÂπ∂Êìç‰Ωú‰πüÊòØÈÄöËøáÊåÅÁª≠ÈõÜÊàêËá™Âä®ËøõË°åÔºâ„ÄÇÂΩìÊâÄÊúâ‰ª£Á†ÅÂºÄÂèëÂÆåÊØïÂêéÔºåÁî±ÊÄªË¥üË¥£‰∫∫ÂÆ°Ê†∏Ê±áÂÖ•ÊúÄÁªàÈÉ®ÁΩ≤ÁöÑÂàÜÊîØ„ÄÇÂÆ°Ê†∏ÈÄöËøáÂêéÊåÅÁª≠ÈõÜÊàê‰ºöËá™Âä®ÂêàÂπ∂‰ª£Á†ÅÂπ∂ÈÄöËøáÊåÅÁª≠ÈÉ®ÁΩ≤Â∞ÜÂÆåÊï¥ÁöÑ‰ª£Á†ÅÈÉ®ÁΩ≤Âà∞ÁúüÂÆûÁöÑËøêË°åÁéØÂ¢É‰∏≠„ÄÇÂ¶Ç‰ªäÁöÑ GitHub„ÄÅGitLab ÂùáËÉΩÂÆåÊàêÊåÅÁª≠ÂºÄÂèë„ÄÅÊåÅÁª≠ÈõÜÊàêÂíåÊåÅÁª≠ÈÉ®ÁΩ≤ÁöÑÂÖ®ËøáÁ®ã„ÄÇÂΩìÁÑ∂Ôºå‰πüÊúâ‰∏Ä‰∫õËΩØ‰ª∂ÔºàÊØîÂ¶Ç <a href="https://www.jenkins.io/" rel="nofollow" target="_blank" class="extlinks">Jenkins</a> Á≠âÔºâÂèØ‰ª•ÂÆåÊàêÊåÅÁª≠ÈõÜÊàêÂíåÊåÅÁª≠ÈÉ®ÁΩ≤‰∏§Ê≠•ÔºåËÄåÊåÅÁª≠ÂºÄÂèëÂàôÂèØ‰ª•‰æùÊâò‰ªªÊÑèÁöÑ Git ÊâòÁÆ°ÊúçÂä°„ÄÇ</p>

<div class="premonition warning"> <div class="header"> <svg class="icon warning" aria-hidden="true"> <use xlink:href="#icon-warning"></use> </svg> <div class="title"> ÂèãÊÉÖÊèêÈÜí </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉ‰ª•‰∏äÂèôËø∞Èùû‰∏ì‰∏öËß£ÈáäÔºå‰ªÖ‰∏∫‰∏™‰∫∫ÁúãÊ≥ïÔºå‰∏çÂñúÂãøÂñ∑„ÄÇKubernetes ÂÆòÊñπÂ∞ÜÈÉ®ÁΩ≤ÊñπÂºèÂàÜ‰∏∫<strong>‰º†ÁªüÈÉ®ÁΩ≤</strong>„ÄÅ<strong>ËôöÊãüÂåñÈÉ®ÁΩ≤</strong>Âíå<strong>ÂÆπÂô®ÈÉ®ÁΩ≤</strong>‰∏âÁ±ª„ÄÇ</p>



 </div> </div>
<p><img src="https://i.lisz.top/blog/79is8s.webp" alt="(a) ÂçïÊú∫ÁéØÂ¢ÉÂíåÂ§öÊú∫ÁéØÂ¢É„ÄÇ(b) Â§çÊùÇÁéØÂ¢É„ÄÇ(c)‰ª• Git ‰∏∫‰∏≠ÂøÉÁöÑÊåÅÁª≠ÂºÄÂèë„ÄÅÊåÅÁª≠ÈõÜÊàê„ÄÅÊåÅÁª≠ÈÉ®ÁΩ≤ÁöÑÁé∞‰ª£Â∫îÁî®ÂºÄÂèëÊñπÂºè„ÄÇ"></p>

<h3 id="ÂÆû‰æãËß£Êûê">ÂÆû‰æãËß£Êûê</h3>

<p>‚ÄÉ‚ÄÉÂÅáËÆæ‰∏Ä‰∏™ Web Â∫îÁî®ÂêåÊó∂ÈúÄË¶Å‰ΩøÁî®Ôºö</p>

<ul>
  <li>
<strong>ËøêË°åÁéØÂ¢É</strong>ÔºöPHP ËøêË°åÁéØÂ¢É„ÄÅPython ËøêË°åÁéØÂ¢É„ÄÅNodeJS ËøêË°åÁéØÂ¢É„ÄÇ</li>
  <li>
<strong>Êï∞ÊçÆÂ∫ìÊúçÂä°</strong>ÔºöÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºàÊØîÂ¶Ç MySQLÔºâ„ÄÅÈùûÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºàÊØîÂ¶Ç MongoDBÔºâ„ÄÅÁºìÂ≠òÊï∞ÊçÆÂ∫ìÔºàÊØîÂ¶Ç RedisÔºâ„ÄÇ</li>
  <li>
<strong>Êñá‰ª∂Â≠òÂÇ®</strong>ÔºöÁî®‰∫éÂ≠òÂÇ®Áî®Êà∑Â§¥ÂÉè„ÄÅ‰∏ä‰º†Êñá‰ª∂ÁöÑÂØπË±°Â≠òÂÇ®ÔºàS3Ôºâ„ÄÅÁî®‰∫éÂ≠òÂÇ®ËøêË°å‰ª£Á†ÅÁöÑÊñá‰ª∂Â≠òÂÇ®ÔºàÊØîÂ¶Ç NFSÔºâ„ÄÇ</li>
  <li>
<strong>È´òÂèØÁî®Â∫îÁî®ÂÖ•Âè£</strong>ÔºöÊØîÂ¶Ç Nginx„ÄÅHaProxy Á≠â„ÄÇ</li>
</ul>

<p>‚ÄÉ‚ÄÉÂú®ÂçïÊú∫ÁéØÂ¢É‰∏≠ÔºåÊåâÁÖß‰ª•ÂâçÊàë‰ª¨Á¢∞ËßÅËøôÁßçË¶ÅÊ±ÇÂèØËÉΩÂ∞±Ë¶ÅÂ§¥Â§ß‰∫ÜÔºåÊØïÁ´üÂêåÊó∂ÈÖçÁΩÆËøô‰πàÂ§öÁéØÂ¢ÉÈöæÂÖç‰ºöÊúâ‰∏çÂèØÈ¢ÑÁü•ÁöÑÈóÆÈ¢ò„ÄÇ‰∏çËøáÁé∞Âú®ÔºåÂÆπÂô®ÂåñÊäÄÊúØÔºàÊØîÂ¶Ç <a href="https://www.docker.com/" rel="nofollow" target="_blank" class="extlinks">Docker</a>ÔºâÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Â∞ÜÊâÄÊúâÁöÑÈúÄÊ±ÇÈÉΩÊãÜÂàÜÊàêÁã¨Á´ãÁöÑ container ÂÆû‰æã„ÄÇ‰∏ç‰ΩÜÂèØ‰ª•ËÆ©ÂÆÉ‰ª¨‰πãÈó¥Âú®ÂÜÖÈÉ®ÁΩëÁªú‰∏≠‰∫íÈÄöÔºåËøòÂèØ‰ª•ÂØπÂ§ñÂè™Êö¥Èú≤ÂøÖË¶ÅÁöÑÂ∫îÁî®ÂÖ•Âè£ÊâÄÈúÄÁöÑ <code class="language-plaintext highlighter-rouge">80</code> Âíå <code class="language-plaintext highlighter-rouge">443</code> Á´ØÂè£„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÊó¢Â∞ÜÂêÑÈ°πÊúçÂä°ËøõË°å‰∫ÜÂêàÁêÜÊãÜÂàÜÔºåÂèàËÉΩ‰øùËØÅÂ∫îÁî®ÊúçÂä°ÁöÑÂÆâÂÖ®ÊÄß„ÄÇÂç≥‰ΩøÊòØÈúÄË¶ÅÂØπÊüê‰∏™ËøêË°åÁéØÂ¢ÉÊàñËÄÖÊï∞ÊçÆÂ∫ìÊúçÂä°ËøõË°åÁâàÊú¨ÂçáÁ∫ßÔºå‰πüÂèØ‰ª•ÂæàÂÆπÊòìÂÅöÂà∞„ÄÇ</p>

<p>‚ÄÉ‚ÄÉÂú®Â§öÊú∫ÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨Â¶ÇÊûúËøòÊÉ≥Áî®ÂÆπÂô®ÂåñÊäÄÊúØÔºåÈÇ£Â∞±ÂøÖÈ°ªÁî®ÂÆπÂô®ÂåñÈõÜÁæ§„ÄÇÂæà‰πÖ‰ª•ÂâçÔºåDocker ÂÆòÊñπÂ∞±Êèê‰æõ‰∫Ü‰∏ÄÁßç Swarm Ê®°ÂºèÊù•ÁªÑÊàêÂÆπÂô®ÂåñÈõÜÁæ§„ÄÇËøôÁßçÊñπÂºèÁöÑÂ•ΩÂ§ÑÊòØÈùûÂ∏∏ÁÆÄÂçïÈÖçÁΩÆ„ÄÅËΩªÈáèÊòìÁî®ÔºåÂØπ‰∫éÁÜüÊÇâ‰ΩøÁî® Docker ÁöÑÂºÄÂèëËÄÖÊù•ËØ¥Âè™ÈúÄË¶ÅËä±ÂæàÂ∞ëÁöÑÊó∂Èó¥Â∞±ËÉΩÊêûÊòéÁôΩ„ÄÇÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºåDocker Swarm ‰æùËµñ‰∫é Docker API„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåDocker Êú¨Ë∫´‰∏çÊîØÊåÅÁöÑ‰∏úË•øËøòÊòØ‰∏çÊîØÊåÅÔºåÊØîÂ¶ÇÊõ¥Âä†È´òÊïàÂÆâÂÖ®ÁöÑÁΩëÁªú„ÄÅËä±ÂºèÂ§öÊ†∑ÁöÑÂ≠òÂÇ®Á≠â„ÄÇ‰∏∫‰∫ÜËÉΩÂ§üÊõ¥Â•ΩË∑®‰∏ªÊú∫ÈõÜÁæ§Âú∞Ëá™Âä®ÈÉ®ÁΩ≤„ÄÅÊâ©Â±ï‰ª•ÂèäËøêË°åÂ∫îÁî®Á®ãÂ∫èÂÆπÂô®ÔºåÊàë‰ª¨ÈÄâÊã©‰ΩøÁî® <a href="https://kubernetes.io/zh-cn/" rel="nofollow" target="_blank" class="extlinks">Kubernetes</a>ÔºàÁº©ÂÜô‰∏∫ <strong>K8S</strong>Ôºâ„ÄÇ</p>

<div class="premonition info"> <div class="header"> <svg class="icon info" aria-hidden="true"> <use xlink:href="#icon-info"></use> </svg> <div class="title"> Â∞èÁü•ËØÜ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉÂú® 2014 Âπ¥ Google ÂºÄÊ∫ê‰∫Ü Kubenetes È°πÁõÆÔºåÂêéÊù•ÂèàË¥°ÁåÆÁªô‰∫Ü‰∫ëÂéüÁîüËÆ°ÁÆóÂü∫Èáë‰ºö <a href="https://www.cncf.io/" rel="nofollow" target="_blank" class="extlinks">CNCF</a>„ÄÇÂæàÂ§öÂÖ¨Âè∏‰ª• Kubernetes ‰∏∫Âü∫Á°ÄÂºÄÂèë‰∫ÜËá™ÂÆ∂ÁöÑÂÆπÂô®ÂåñÈõÜÁæ§Âπ≥Âè∞ÔºåÊØîÂ¶Ç RedHat ÁöÑ <a href="https://www.redhat.com/en/technologies/cloud-computing/openshift" rel="nofollow" target="_blank" class="extlinks">OpenShift</a>ÔºåAWS ÁöÑ <a href="https://aws.amazon.com/cn/eks/" rel="nofollow" target="_blank" class="extlinks">Elastic Kubenetes Services, EKS</a>ÔºåAzure ÁöÑ <a href="https://azure.microsoft.com/zh-cn/products/kubernetes-service" rel="nofollow" target="_blank" class="extlinks">Azure Kubernetes Services, AKS</a>ÔºåÈòøÈáå‰∫ëÁöÑ <a href="https://www.aliyun.com/product/kubernetes" rel="nofollow" target="_blank" class="extlinks">Aliyun Container Service for Kubernetes, ACK</a>ÔºåËÖæËÆØ‰∫ëÁöÑ <a href="https://cloud.tencent.com/product/tke" rel="nofollow" target="_blank" class="extlinks">Tencent Kubernetes Engine, TKE</a> Á≠â„ÄÇ</p>



 </div> </div>
<h2 id="kubernetes-Êû∂ÊûÑ">Kubernetes Êû∂ÊûÑ</h2>

<p>‚ÄÉ‚ÄÉËôΩÁÑ∂ Kubernetes ÂÆòÊñπÊñáÊ°£Â∑≤ÁªèÂ∞ÜÊû∂ÊûÑÂõæ‰ª•ÂèäÁõ∏ÂÖ≥Ê¶ÇÂøµ‰ªãÁªçÂæóÈùûÂ∏∏Ê∏ÖÊ•öÔºå‰ΩÜËøòÊòØÊÉ≥ËØ¥ËØ¥Ëá™Â∑±ÁöÑÁêÜËß£„ÄÇÁ±ª‰ºº‰∫é‰∏ÄËà¨ÈõÜÁæ§Âπ≥Âè∞ÔºåK8S ‰πüÈúÄË¶ÅÊúâËá≥Â∞ë‰∏Ä‰∏™ÊéßÂà∂ËäÇÁÇπÔºàÂÆòÊñπÁß∞‰πã‰∏∫‚ÄúÊéßÂà∂Âπ≥Èù¢‚ÄùÔºâÂíå‰∏Ä‰∏™Â∑•‰ΩúËäÇÁÇπ„ÄÇÈªòËÆ§Êù•ËØ¥ÔºåK8S <strong>‰∏çÊé®ËçêÊéßÂà∂ËäÇÁÇπÂêåÊó∂‰Ωú‰∏∫Â∑•‰ΩúËäÇÁÇπ</strong>ÔºåÂõ†‰∏∫Ëøô‰ºöÂΩ±ÂìçÈõÜÁæ§Ë∞ÉÂ∫¶ÁöÑÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄß„ÄÇ‰ªé‰∏ãÈù¢ÁöÑÈáçÁªòÊû∂ÊûÑÂõæÂèØ‰ª•ÁúãÂá∫ÔºåK8S ÈõÜÁæ§‰ºöÂØπÂ§ñÊèê‰æõ API ‰ª•‰æõÁî®Êà∑‰ªéÈõÜÁæ§Â§ñËøõË°åË∞ÉÂ∫¶„ÄÇÂú®ÈõÜÁæ§ÂÜÖÈÉ®ÔºåÂ∑•‰ΩúËäÇÁÇπÈÄöËøá kubelet ÊúçÂä°‰∏éÊéßÂà∂ËäÇÁÇπÁõ¥Êé•ËøûÊé•ÔºåÊéßÂà∂ËäÇÁÇπ‰πüÈÄöËøá kubelet ÊúçÂä°ÂêëÂ∑•‰ΩúËäÇÁÇπ‰∏ãËææË∞ÉÂ∫¶Êåá‰ª§Êù•ÁÆ°ÁêÜÂ∑•‰ΩúËäÇÁÇπ‰∏äÁöÑ pod„ÄÇ</p>

<div class="premonition note"> <div class="header"> <svg class="icon note" aria-hidden="true"> <use xlink:href="#icon-note"></use> </svg> <div class="title"> Pod ÁöÑÊ¶ÇÂøµ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉPod ÂèØ‰ª•ÁêÜËß£‰∏∫ K8S ‰∏≠Â∫îÁî®ÁöÑÊúÄÂ∞èÂçï‰ΩçÔºå‰∏Ä‰∏™ Pod ‰∏≠ÂèØËÉΩ‰ºöÂåÖÊã¨‰∏Ä‰∏™ÊàñÂ§ö‰∏™ container (ÂÆπÂô®)ÔºåËøô‰∫õÂÆπÂô®Èó¥ÂèØ‰ª•‰∫íÈÄöÔºå‰ΩÜÂØπÂ§ñÂè™Êúâ Pod ÊúâËµÑÊ†ºÊã•Êúâ IP„ÄÇËøôÊúâÁÇπÁ±ª‰ºº‰∫éËøõÁ®ã‰∏éÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºåËøõÁ®ãÊòØÊã•ÊúâËµÑÊ∫êÁöÑÊúÄÂ∞èÂçï‰ΩçÔºåÁ∫øÁ®ã‰æùËµñ‰∫éËøõÁ®ãËÄåÂ≠òÂú®ÔºåÂêå‰∏ÄËøõÁ®ãÈó¥ÁöÑÁ∫øÁ®ãÈó¥ÂèØ‰ª•Êó†ÈöúÁ¢çÈÄö‰ø°ÔºåËÄå‰∏çÂêåËøõÁ®ãÈó¥ÁöÑÈÄö‰ø°ÂàôÈúÄË¶ÅÈÄöËøáÁ´ØÂè£Êàñ socket Êù•ËøõË°å„ÄÇ</p>

<p>‚ÄÉ‚ÄÉÂêå‰∏Ä‰∏™Â∑•‰ΩúËäÇÁÇπ‰∏äÁöÑ Pod ÁöÑ IP Â±û‰∫éÂêå‰∏Ä‰∏™Â≠êÁΩëÔºå‰∏çÂêåÂ∑•‰ΩúËäÇÁÇπÁöÑÂ≠êÁΩëÂèàÂ±û‰∫éÂêå‰∏Ä‰∏™Â§ßÂ≠êÁΩë (podSubnetÔºå‰∏ÄËà¨ÈúÄË¶ÅÂú®ÂàùÂßãÂåñÈõÜÁæ§Êó∂ÂÆö‰πâ)„ÄÇËøôÊ†∑ÁöÑËÆæËÆ°Âú®ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂáèÂ∞ë‰∫Ü IP ÁÆ°ÁêÜÁöÑÈöæÂ∫¶ÔºåÂπ∂‰∏îËÉΩÂ§üÊúÄÂ§ßÁ®ãÂ∫¶‰∏äÂáèÂ∞ëÂÆπÂô®Êö¥Èú≤ÁöÑÈ£éÈô©„ÄÇ</p>



 </div> </div>
<p><img src="https://i.lisz.top/blog/BV7Jqo.webp" alt="ÈáçÁªò Kubernetes ÂÆòÊñπÊñáÊ°£Êû∂ÊûÑÂõæ"></p>

<div class="premonition note"> <div class="header"> <svg class="icon note" aria-hidden="true"> <use xlink:href="#icon-note"></use> </svg> <div class="title"> CRI ÁöÑÊ¶ÇÂøµ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉCRIÔºåÂÖ®Âêç‰∏∫ Container Runtime InterfaceÔºàÂÆπÂô®ËøêË°åÊó∂Êé•Âè£ÔºâÔºåÊòØ K8S Êû∂ÊûÑ‰∏≠ kubeletÂíåÂÆπÂô®ËøêË°åÊó∂ÈÄö‰ø°ÁöÑ‰∏ªË¶ÅÂçèËÆÆ„ÄÇÊàë‰ª¨ÊâÄÁÜüÁü•ÁöÑ Docker Â∞±ÊòØ‰∏ÄÁßçÂÆπÂô®ËøêË°åÊó∂Ôºå‰ΩÜÊòØËá™‰ªé K8S 1.20 ÁâàÊú¨ÂºÉÁî® Docker Ëá™Â∏¶ÁöÑÂÆπÂô®ËøêË°åÊó∂Êé•Âè£ Dockershim ‰ª•Êù•ÔºåÊàë‰ª¨Âè™ËÉΩ‰ΩøÁî®È¢ùÂ§ñÁöÑ CRI ‚Äì <a href="https://github.com/Mirantis/cri-dockerd" rel="nofollow" target="_blank" class="extlinks">cri-dockerd</a> Êù•Ë∞ÉÁî® Docker„ÄÇÂõ†Ê≠§Êé®Ëçê‰ΩøÁî®ÂåÖÂê´ CRI ÁöÑÂÆπÂô®ËøêË°åÊó∂ <a href="https://containerd.io/" rel="nofollow" target="_blank" class="extlinks">containerd</a> ÊàñËÄÖ <a href="https://cri-o.io/" rel="nofollow" target="_blank" class="extlinks">cri-o</a> Êù•Êõø‰ª£ Docker„ÄÇ</p>



 </div> </div>
<h3 id="ÁªÑÊàêÈÉ®ÂàÜ">ÁªÑÊàêÈÉ®ÂàÜ</h3>

<p>‚ÄÉ‚ÄÉÁî±‰∫é K8S ÊòØ‰∏ÄÊ¨æÂπ≥Âè∞Êó†ÂÖ≥ÁöÑÂÆπÂô®ÈõÜÁæ§ÊñπÊ°àÔºåÊâÄ‰ª•ÂÆòÊñπÊèê‰æõÁöÑÊñπÊ°àÂè™ÊòØ‰∏Ä‰∏™Êï¥‰ΩìÔºåÊàë‰ª¨ÈúÄË¶ÅËá™Ë°åÈÄâÊã©‰ª•‰∏ãÂêÑÈ°πÁªÑ‰ª∂Ôºö</p>

<ul>
  <li>
<strong>ÂÆπÂô®ËøêË°åÊó∂ (CRI)</strong>ÔºöÂ¶Ç‰∏äÊâÄËø∞ÔºåÊé®Ëçê‰ΩøÁî® containerd ÊàñËÄÖ cri-o Êù•Êõø‰ª£ docker„ÄÇ‰∏ãÈù¢ÂÆûË∑µÈÉ®ÂàÜÂ∞Ü‰ª• containerd ‰∏∫‰æã„ÄÇ</li>
  <li>
<strong>ÁΩëÁªúÁªÑ‰ª∂ (CNI, Container Network Interface)</strong>ÔºöK8S ‰∏≠ÁΩëÁªúÊúâ‰∏âÁßç Node„ÄÅPod„ÄÅServiceÔºåÂÖ∂‰∏≠ Node IP ÊòØËäÇÁÇπÁöÑ IPÔºåÁî®‰∫éËøûÈÄöÊàñËÄÖÊö¥Èú≤Á´ØÂè£„ÄÇPod IP ÊòØ Pod ÁöÑÁã¨Á´ãÂÜÖÁΩë IPÔºåÂè™ËÉΩÂú® K8S ÈõÜÁæ§Èó¥ËÆøÈóÆ„ÄÇService IP ÊòØÂ§ö‰∏™ Pod ÂÖ±ÂêåÁªÑÊàê Service ÂêéÈúÄË¶Å‰∫íÈÄöÊó∂‰ΩøÁî®ÁöÑÔºå‰∏ÄËà¨‰ªÖÂú® Service ÂÜÖÈÉ®ÂèØËÆøÈóÆÔºå‰∏çËÉΩË¢´Áî®Êà∑ËÆøÈóÆ„ÄÇK8S ÂÆòÊñπÊñáÊ°£‰∏≠ <a href="https://kubernetes.io/zh-cn/docs/concepts/cluster-administration/addons/#networking-and-network-policy" rel="nofollow" target="_blank" class="extlinks">ËÅîÁΩëÂíåÁΩëÁªúÁ≠ñÁï•</a> Âàó‰∏æ‰∫ÜÂæàÂ§öÂèØÁî®ÁöÑ CNIÔºåËøôÈáåÊàë‰ª¨ÈÄâÁî® <a href="https://www.tigera.io/project-calico/" rel="nofollow" target="_blank" class="extlinks">Calico</a> Êù•ËøõË°åÂÆûË∑µ„ÄÇ</li>
  <li>
<strong>ÊúçÂä°ÂèëÁé∞ (DNS)</strong>ÔºöÈªòËÆ§‰∏∫ <a href="https://coredns.io/" rel="nofollow" target="_blank" class="extlinks">CoreDNS</a>ÔºåÂú®ÈÖçÁΩÆÂÆåÁΩëÁªúÁªÑ‰ª∂ÂêéËá™Âä®ÂàõÂª∫Ôºå‰∏∫ Pod Êèê‰æõ DNS Ëß£ÊûêÊúçÂä°ÔºåÂåÖÊã¨ÂÖ¨ÁΩëÂüüÂêçËß£ÊûêÂíå Service Âà´ÂêçËß£Êûê„ÄÇ</li>
  <li>
<strong>ÂÆπÂô®Â≠òÂÇ®Êé•Âè£ (CSI, Container Storage Interface)</strong>ÔºöÁõÆÂâç K8S Âü∫Êú¨‰∏äÁßªÈô§‰∫ÜÂ§ßÈÉ®ÂàÜÁöÑÁ¨¨‰∏âÊñπËΩØ‰ª∂Áõ∏ÂÖ≥Â≠òÂÇ®Êèí‰ª∂ÔºåËΩ¨ËÄåÈÄöËøáÁ¨¨‰∏âÊñπËá™Ë°åÁª¥Êä§ÁöÑ CSI Êù•Êâ©ÂÖÖÂ≠òÂÇ®Á±ªÁöÑÊîØÊåÅ„ÄÇÂèØ‰ª•ÈÄöËøáÊü•Áúã K8S ÂÆòÁΩëÊñáÊ°£ÁöÑ <a href="https://kubernetes.io/zh-cn/docs/concepts/storage/storage-classes/#provisioner" rel="nofollow" target="_blank" class="extlinks">Â≠òÂÇ®Âà∂Â§áÂô®</a> Âíå kubernetes-csi ÁöÑ <a href="https://kubernetes-csi.github.io/docs/drivers.html" rel="nofollow" target="_blank" class="extlinks">Drivier</a> Êù•‰∫ÜËß£Êõ¥Â§ö„ÄÇËøôÈáåÊàë‰ª¨ÈÄâÁî® NFS ÁöÑ CSI Driver ‰Ωú‰∏∫‰æãÂ≠êËøõË°åÂÆûË∑µ„ÄÇ</li>
</ul>

<h2 id="Êê≠Âª∫-k8s-ÈõÜÁæ§">Êê≠Âª∫ K8S ÈõÜÁæ§</h2>

<p>‚ÄÉ‚ÄÉÂú®Â≠¶‰π†ÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® <a href="https://kind.sigs.k8s.io/" rel="nofollow" target="_blank" class="extlinks">kind</a>„ÄÅ<a href="https://minikube.sigs.k8s.io/" rel="nofollow" target="_blank" class="extlinks">minikube</a> ÊàñËÄÖ kubeadm Âú®Êú¨Âú∞Âø´ÈÄüÈÉ®ÁΩ≤ K8S ÈõÜÁæ§ÔºõÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® <a href="https://kops.sigs.k8s.io/" rel="nofollow" target="_blank" class="extlinks">kops</a>„ÄÅ<a href="https://kubespray.io/" rel="nofollow" target="_blank" class="extlinks">Kubespray</a> ÊàñËÄÖ kubeadm Âú®Â§öËäÇÁÇπ‰∏äÂø´ÈÄüÈÉ®ÁΩ≤ K8S ÈõÜÁæ§„ÄÇÊâÄ‰ª•ËøôÈáåÊàë‰ª¨ÈááÁî®‰∫ÜÈÄöÁî®ÁöÑ kubeadm Êù•Êê≠Âª∫ K8S ÈõÜÁæ§„ÄÇ</p>

<p>‚ÄÉ‚ÄÉÂú®Ê≠£ÂºèÈÉ®ÁΩ≤‰πãÂâçÈúÄË¶ÅËßÑÂàíÂÆûÈôÖÊû∂ÊûÑ„ÄÅÂÅö‰∏Ä‰∫õÂü∫Êú¨ÂáÜÁ°Æ‰ª•ÂèäÂÆâË£ÖÂøÖË¶ÅÁöÑËΩØ‰ª∂ÂíåÂ∑•ÂÖ∑ ‚Äì <code class="language-plaintext highlighter-rouge">kubelet</code>Ôºå<code class="language-plaintext highlighter-rouge">kubectl</code> Âíå <code class="language-plaintext highlighter-rouge">kubeadm</code>„ÄÇ‰∏ãÂõæ‰∏∫Êú¨ÂÆûË∑µËßÑÂàíÁöÑ NodeSubset„ÄÅPodSubset Âíå ServiceSubset„ÄÇ</p>

<p><img src="https://i.lisz.top/blog/Z0hCRO.webp" alt="K8S ÈõÜÁæ§ÂÆûÈôÖÊû∂ÊûÑÂíåÁΩëÁªúËßÑÂàí"></p>

<h3 id="Âü∫Êú¨ÂáÜÂ§á">Âü∫Êú¨ÂáÜÂ§á</h3>

<h4 id="ÂÖ≥Èó≠-swap-‰∫§Êç¢ÂàÜÂå∫">ÂÖ≥Èó≠ SWAP ‰∫§Êç¢ÂàÜÂå∫</h4>

<p>‚ÄÉ‚ÄÉK8S ‰∏∫‰∫ÜÊÄßËÉΩËÄÉËôëÈªòËÆ§ÂøÖÈ°ªÂÖ≥Èó≠ SWAP ‰∫§Êç¢ÂàÜÂå∫ÔºåËÄåÈÄöÂ∏∏ÂÆû‰ΩìÊúçÂä°Âô®ÂÆâË£ÖÂêé‰ºöÊúâ SWAP ‰∫§Êç¢ÂàÜÂå∫Ôºå‰∫ëÊúçÂä°Âô®Êàñ VPS Ê≤°Êúâ„ÄÇÈÄöËøá <code class="language-plaintext highlighter-rouge">sudo swapoff -a</code> ÂëΩ‰ª§ÂèØ‰ª•‰∏¥Êó∂ÂÖ≥Èó≠ SWAP ÂàÜÂå∫ÔºåÊàñËÄÖÈÄöËøáÊ≥®Èáä <code class="language-plaintext highlighter-rouge">/etc/fstab</code> Êñá‰ª∂‰∏≠ÁöÑ <code class="language-plaintext highlighter-rouge">swap.img</code> Ëøô‰∏ÄË°åÂπ∂ÈáçÂêØÊúçÂä°Âô®Ê∞∏‰πÖÂÖ≥Èó≠ SWAP ‰∫§Êç¢ÂàÜÂå∫„ÄÇ</p>

<h4 id="ÂºÄÂêØ-ipv4-ËΩ¨Âèë">ÂºÄÂêØ IPv4 ËΩ¨Âèë</h4>

<p>‚ÄÉ‚ÄÉÁî±‰∫é K8S ÈõÜÁæ§‰∏≠Âêå‰∏Ä‰∏™ Service ÁöÑ Pod ÂèØËÉΩË¢´ÂàÜÈÖçÂà∞‰∏çÂêåËäÇÁÇπÔºåÈÇ£‰πà‰∏çÂêåËäÇÁÇπÈó¥ÁöÑ Pod ÈÄö‰ø°ÊòØÈùûÂ∏∏ÂøÖË¶ÅÁöÑÔºåÂç≥‰∏çÂêå PodSubnet ‰πãÈó¥ÁöÑÈÄö‰ø°ÈúÄË¶ÅÈÄöËøá Node IP Êù•ËøõË°å IPv4 ËΩ¨Âèë„ÄÇÊâßË°å‰ª•‰∏ãÂëΩ‰ª§Ê∑ªÂä†ÂÖÅËÆ∏ IPv4 ËΩ¨ÂèëÂà∞ <code class="language-plaintext highlighter-rouge">/etc/sysctl.d/k8s.conf</code> Êñá‰ª∂ÈáåÔºåÂπ∂‰∏îÁ´ãÂç≥ÁîüÊïàÔºö</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ê∑ªÂä†ÈÖçÁΩÆ</span>
<span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/sysctl.d/k8s.conf <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
net.ipv4.ip_forward = 1
net.bridge.bridge-nf-call-iptables = 1
net.bridge.bridge-nf-call-ip6tables = 1
</span><span class="no">EOF

</span><span class="c"># Á´ãÂç≥ÁîüÊïà</span>
<span class="nb">sudo </span>sysctl <span class="nt">--system</span>
</code></pre></div></div>

<h4 id="ÈÖçÁΩÆ‰∏ªÊú∫ÂêçÂØπÂ∫î">ÈÖçÁΩÆ‰∏ªÊú∫ÂêçÂØπÂ∫î</h4>

<p>‚ÄÉ‚ÄÉK8S ÈõÜÁæ§ÂàùÂßãÂåñÊó∂‰ºöËá™Âä®ÊêúÁ¥¢‰∏ªÊú∫ÂêçÁöÑ DNS Ëß£ÊûêÔºåÁõÆÂâçÊµãËØïÁöÑ‰∏ªÊú∫ÂêçÊ≤°ÊúâÂÆåÊï¥ÁöÑ FQDN Êàñ PTR Ëß£ÊûêÔºåÂõ†Ê≠§ÊúâÂøÖË¶ÅËÆæÁΩÆÂ•Ω‰∏ªÊú∫ÂêçÂíå IP ÂØπÂ∫î‰ø°ÊÅØÂà∞Êú¨Âú∞ÈùôÊÄÅ DNS Ëß£ÊûêÊñá‰ª∂ <code class="language-plaintext highlighter-rouge">/etc/hosts</code> ‰∏≠„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ÂàÜÂà´Âú®‰∏çÂêåËäÇÁÇπÊ†πÊçÆËßÑÂàíËÆæÁΩÆÂ•Ω‰∏ªÊú∫Âêç</span>
<span class="nb">sudo </span>hostnamectl set-hostname vm01
<span class="nb">sudo </span>hostnamectl set-hostname vm02
<span class="nb">sudo </span>hostnamectl set-hostname vm03

<span class="c"># ‰øÆÊîπÊâÄÊúâËäÇÁÇπÁöÑ /etc/hosts</span>
<span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/hosts <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
192.168.120.1  vm01
192.168.120.2  vm02
192.168.120.3  vm03
</span><span class="no">EOF
</span></code></pre></div></div>

<h4 id="ÂêåÊ≠•Êó∂Èó¥">ÂêåÊ≠•Êó∂Èó¥</h4>

<p>‚ÄÉ‚ÄÉK8S ÈõÜÁæ§ÁöÑËøêË°åÂøÖÈ°ª‰øùËØÅËäÇÁÇπÁöÑÊó∂Èó¥ÊòØÂÆåÂÖ®ÂêåÊ≠•ÁöÑÔºåÂê¶ÂàôÂÆπÊòìÈÄ†ÊàêÊüê‰∫õÊú™Áü•ÁöÑ Bug„ÄÇÊØîÂ¶ÇËØÅ‰π¶ÁöÑËøáÊúüÊó∂Èó¥Â∞Ü‰ºöË¢´Êüê‰∫õÊó∂Èó¥‰∏çÂêåÊ≠•ÁöÑËäÇÁÇπÈîôËØØÂà§Êñ≠„ÄÇÊé®Ëçê‰ΩøÁî®Âêå‰∏ÄÊó∂Âå∫ÂíåÂêå‰∏Ä NTP ÊúçÂä°Âô®ÔºåÂ¶Ç‰∏ãÂç≥ÂèØÂÆåÊàêËÆæÁΩÆ„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ËÆæÁΩÆÁõ∏ÂêåÊó∂Âå∫Âπ∂Êü•Áúã</span>
<span class="nb">sudo </span>timedatectl set-timezone Asia/Shanghai
timedatectl
timedatectl status

<span class="c"># ‰øÆÊîπ NTP ÊúçÂä°Âô®</span>
<span class="nb">sudo </span>timedatectl set-ntp <span class="nb">false
sudo sed</span> <span class="nt">-i</span> <span class="s1">'s/#NTP=/NTP=ntp.lisz.top/'</span> /etc/systemd/timesyncd.conf
<span class="nb">sudo sed</span> <span class="nt">-i</span> <span class="s1">'s/#FallbackNTP=ntp.ubuntu.com/FallbackNTP=ntp.aliyun.com/'</span> /etc/systemd/timesyncd.conf
<span class="nb">sudo </span>timedatectl set-ntp <span class="nb">true</span>

<span class="c"># ÈáçÂêØÊúçÂä°‰ΩøÈÖçÁΩÆÁîüÊïà„ÄÅÂêåÊ≠•Êó∂Èó¥Âπ∂Êü•Áúã‰ø°ÊÅØ</span>
<span class="nb">sudo </span>systemctl restart systemd-timesyncd
timedatectl show-timesync <span class="nt">--all</span>
<span class="nb">date</span>
</code></pre></div></div>

<h3 id="ÂÆâË£ÖÂøÖË¶ÅËΩØ‰ª∂ÂíåÂ∑•ÂÖ∑">ÂÆâË£ÖÂøÖË¶ÅËΩØ‰ª∂ÂíåÂ∑•ÂÖ∑</h3>

<h4 id="ÂÆâË£Ö-containerd">ÂÆâË£Ö containerd</h4>

<p>‚ÄÉ‚ÄÉcontainerd ËôΩÁÑ∂ÊòØÁî±  containerd ÂºÄÂèëÂõ¢ÈòüË¥üË¥£ÂèëÂ∏ÉÔºå‰ΩÜÊòØ APT Êàñ YUM ÈïúÂÉèÊ∫ê‰ªçÁÑ∂ÊòØÁî± Docker ÂÆòÊñπË¥üË¥£ÔºåÊâÄ‰ª•ÂΩìÊàë‰ª¨Ê∑ªÂä† docker-ce ÁöÑÈïúÂÉèÊ∫êÂêéÂèØ‰ª•Áõ¥Êé•‰∏ãËΩΩ <code class="language-plaintext highlighter-rouge">containerd.io</code> Êù•ÂÆâË£Ö containerd„ÄÇÂΩìÁÑ∂Ôºå Êàë‰ª¨ÂèØ‰ª•‰ªé <a href="https://github.com/containerd/containerd/releases" rel="nofollow" target="_blank" class="extlinks">containerd/containerd</a> Áõ¥Êé•‰∏ãËΩΩ‰∫åËøõÂà∂ÂèØÊâßË°åÊñá‰ª∂„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ê∑ªÂä†ÈïúÂÉèÊ∫ê</span>
curl <span class="nt">-fsSL</span> https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/gpg | <span class="nb">sudo </span>gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /etc/apt/trusted.gpg.d/docker.gpg
<span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/apt/sources.list.d/docker.list <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
    deb [arch=amd64 signed-by=/etc/apt/trusted.gpg.d/docker.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/ </span><span class="si">$(</span>lsb_release <span class="nt">-c</span> <span class="nt">--short</span><span class="si">)</span><span class="sh"> stable
</span><span class="no">EOF

</span><span class="c"># Êõ¥Êñ∞ËΩØ‰ª∂ÂàóË°®ÁºìÂ≠òÂπ∂ÂÆâË£Ö containerd</span>
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade <span class="nt">-y</span> <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> containerd.io
</code></pre></div></div>

<div class="premonition info"> <div class="header"> <svg class="icon info" aria-hidden="true"> <use xlink:href="#icon-info"></use> </svg> <div class="title"> Â∞èÂª∫ËÆÆ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉ‰∏™‰∫∫Êé®Ëçê‰ΩøÁî® APT Êàñ YUM ÊñπÂºèÂÆâË£Ö containerd„ÄÇÂéüÂõ†Êúâ‰∫åÔºö‰∏ÄÊòØÂõΩÂÜÖÊúâ docker-ce ÈïúÂÉèÂÆâË£ÖÊØîËæÉÂø´Ôºå‰∫åÊòØÊÉ≥Ë¶ÅÊõ¥Êñ∞Êó∂ÈùûÂ∏∏ÂÆπÊòì„ÄÇ</p>



 </div> </div>
<h4 id="ÈÖçÁΩÆ-containerd">ÈÖçÁΩÆ containerd</h4>

<p>‚ÄÉ‚ÄÉcontainerd ÂÆâË£ÖÂêéÈªòËÆ§Ê≤°ÊúâÈÖçÁΩÆÊñá‰ª∂‰πü‰∏ç‰ºöËá™Âä®ÂêØÂä®ÂêéÂè∞Á®ãÂ∫èÔºåÊâÄ‰ª•ÈúÄË¶ÅÂáÜÂ§áÈÖçÁΩÆÊñá‰ª∂Âπ∂Â§çÂà∂Âà∞ <code class="language-plaintext highlighter-rouge">/etc/containerd/config.toml</code> ÂÜçÂêØÂä®„ÄÇÁî±‰∫é K8S ÈõÜÁæ§ÈªòËÆ§‰ΩøÁî® <code class="language-plaintext highlighter-rouge">registry.k8s.io</code> Âíå <code class="language-plaintext highlighter-rouge">registry-1.docker.io</code> Ê∫ê‰∏ãËΩΩÂÆπÂô®ÈïúÂÉèÔºå‰∏∫‰∫ÜÊèêÂçáÈÄüÂ∫¶Âª∫ËÆÆÂàáÊç¢Âà∞ÈòøÈáå‰∫ëÂíå DaoCloud ÁöÑÂä†ÈÄüÂô®„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>containerd config default <span class="o">&gt;</span> containerd_config.toml
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s#registry.k8s.io#registry.cn-hangzhou.aliyuncs.com/google_containers#g"</span> containerd_config.toml
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"/containerd.runtimes.runc.options/a</span><span class="se">\ \ \ \ \ \ \ \ \ \ \ \ </span><span class="s2">SystemdCgroup = true"</span> containerd_config.toml
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s#https://registry-1.docker.io#https://docker.m.daocloud.io#g"</span> containerd_config.toml

<span class="nb">sudo mkdir</span> <span class="nt">-p</span> /etc/containerd
<span class="nb">cp </span>containerd_config.toml /etc/containerd/config.toml

<span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl <span class="nb">enable </span>containerd
<span class="nb">sudo </span>systemctl restart containerd

<span class="nb">sudo </span>systemctl status containerd.service <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>ctr <span class="nt">--version</span>
</code></pre></div></div>

<div class="premonition info"> <div class="header"> <svg class="icon info" aria-hidden="true"> <use xlink:href="#icon-info"></use> </svg> <div class="title"> Â∞èÊèêÁ§∫ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉÁî±‰∫é <code class="language-plaintext highlighter-rouge">ctr</code> ÂëΩ‰ª§ËøûÊé•ÁöÑ containerd ÁöÑ socket Êñá‰ª∂Âè™Êúâ root Áî®Êà∑ÁªÑÊúâÊùÉÈôêËÆøÈóÆÔºåÊâÄ‰ª•ÁõÆÂâçÂè™ËÉΩ‰ΩøÁî® <code class="language-plaintext highlighter-rouge">sudo ctr</code>„ÄÇÂ¶ÇÊûúÊÉ≥Ë¶ÅÁõ¥Êé•‰ΩøÁî® <code class="language-plaintext highlighter-rouge">ctr</code> ÂëΩ‰ª§ÔºåÂèØ‰ª•‰ΩøÁî® <code class="language-plaintext highlighter-rouge">sudo usermod -aG root ubuntu</code> Êù•Â∞ÜÂΩìÂâçÁî®Êà∑Ê∑ªÂä†Âà∞ root Áî®Êà∑ÁªÑ„ÄÇËµãÊùÉ‰πãÂêéÈúÄÈÄÄÂá∫ÁôªÂΩïÂêéÂÜçÊ¨°ÁôªÂΩïÊâçËÉΩÁîüÊïà„ÄÇ</p>



 </div> </div>
<h4 id="ÂÆâË£Ö-kubeadm-Á≠â">ÂÆâË£Ö kubeadm Á≠â</h4>

<p>‚ÄÉ‚ÄÉÂõΩÂÜÖÊ∏ÖÂçéÂ§ßÂ≠¶ TUNA ÈïúÂÉèÊ∫ê„ÄÅÈòøÈáå‰∫ëÈïúÂÉèÊ∫êÁ≠âÈÉΩÊèê‰æõ‰∫Ü <code class="language-plaintext highlighter-rouge">kubeadm</code> Á≠â‰∏â‰ª∂Â•óÂ∑•ÂÖ∑ÁöÑ APT Êàñ YUM Ê∫êÔºåÈÄöËøá‰ª•‰∏ãÂëΩ‰ª§ÂèØ‰ª•ÂæàÂÆπÊòìÂÆåÂÖ®ÂÆâË£Ö„ÄÇ</p>

<div class="premonition warning"> <div class="header"> <svg class="icon warning" aria-hidden="true"> <use xlink:href="#icon-warning"></use> </svg> <div class="title"> ÂèãÊÉÖÊèêÈÜí </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉÁî±‰∫é kubernetes ‰∏çÂêåÁâàÊú¨ÂèØËÉΩ‰ºöÂ≠òÂú®ËæÉÂ§ßÂ∑ÆÂºÇÔºåÂπ∂‰∏î‰∏∫‰∫ÜÈÅøÂÖçËäÇÁÇπ kubernetes ÁâàÊú¨Âú®‰∏çËá™ËßâÁöÑÊó∂ÂÄôÂçáÁ∫ßÈÄ†ÊàêÂÖºÂÆπÊÄßÈóÆÈ¢òÔºåËøôÈáåÊé®ËçêÂõ∫ÂÆö kubeadm Á≠â‰∏â‰ª∂Â•óÁâàÊú¨Âè∑ÔºåÂç≥‰∏çÂêØÁî® <code class="language-plaintext highlighter-rouge">apt upgrade</code> Ëá™Âä®ÂçáÁ∫ß„ÄÇÁÆ°ÁêÜÂëòÂÖ≥Èó≠ K8S ÈõÜÁæ§ÊâãÂä®ÂçáÁ∫ßÁâàÊú¨Êó∂‰∏çÂèóÂΩ±Âìç„ÄÇ</p>



 </div> </div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Ê∑ªÂä†ÈïúÂÉèÊ∫ê</span>
curl <span class="nt">-fsSL</span> https://mirrors.tuna.tsinghua.edu.cn/kubernetes/core:/stable:/v1.30/deb/Release.key | <span class="nb">sudo </span>gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /etc/apt/keyrings/kubernetes-apt-keyring.gpg 
<span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/apt/sources.list.d/kubernetes.list <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/kubernetes/core:/stable:/v1.30/deb/ / 
# deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/kubernetes/addons:/cri-o:/stable:/v1.30/deb/ / 
</span><span class="no">EOF

</span><span class="c"># Êõ¥Êñ∞ËΩØ‰ª∂ÂàóË°®ÁºìÂ≠òÂπ∂ÂÆâË£Ö kubeadm ‰∏â‰ª∂Â•ó</span>
<span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> kubeadm kubelet kubectl 

<span class="c"># Âõ∫ÂÆö kubeadm Á≠â‰∏â‰ª∂Â•óÁâàÊú¨</span>
<span class="nb">sudo </span>apt-mark hold kubeadm 
<span class="nb">sudo </span>apt-mark hold kubelet 
<span class="nb">sudo </span>apt-mark hold kubectl
</code></pre></div></div>

<h3 id="ÂàùÂßãÂåñÈõÜÁæ§">ÂàùÂßãÂåñÈõÜÁæ§</h3>

<h4 id="È¢Ñ‰∏ãËΩΩÈïúÂÉè">È¢Ñ‰∏ãËΩΩÈïúÂÉè</h4>

<p>‚ÄÉ‚ÄÉÂú®ÊâÄÊúâËäÇÁÇπ‰∏ä‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§ÊèêÂâç‰∏ãËΩΩÂ•Ω K8S ÈõÜÁæ§ÊâÄÈúÄÁöÑÂü∫Êú¨ÈïúÂÉèÔºåÈÅøÂÖçÂàùÂßãÂåñÊó∂‰∏ÄÁõ¥Âú®Á≠âÂæÖÂêÑ‰∏™ËäÇÁÇπ‰∏ãËΩΩÈïúÂÉè„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubeadm config images list | <span class="nb">sed</span> <span class="nt">-e</span> <span class="s1">'s/^/sudo ctr image pull /g'</span> <span class="nt">-e</span> <span class="s1">'s#registry.k8s.io#registry.cn-hangzhou.aliyuncs.com/google_containers#g'</span> | sh <span class="nt">-x</span>
</code></pre></div></div>

<h4 id="ÂàùÂßãÂåñÊéßÂà∂ËäÇÁÇπ">ÂàùÂßãÂåñÊéßÂà∂ËäÇÁÇπ</h4>

<p>‚ÄÉ‚ÄÉ‰∏ãËΩΩÂÆåÊâÄÈúÄÁöÑÂÆπÂô®ÈïúÂÉèÂêéÔºåÂú®ÊéßÂà∂ËäÇÁÇπ‰∏ä‰ΩøÁî® <code class="language-plaintext highlighter-rouge">sudo kubeadm init --config=kubeadm_config.yaml</code> ÂëΩ‰ª§ÂàùÂßãÂåñÊéßÂà∂ËäÇÁÇπ„ÄÇ<code class="language-plaintext highlighter-rouge">kubeadm_config.yaml</code> ÁöÑÂÜÖÂÆπÂ¶Ç‰∏ãÊâÄÁ§∫ÔºöÔºàÂª∫ËÆÆÂ∞ÜÈÖçÁΩÆÊñá‰ª∂ÊîæÁΩÆÂú® <code class="language-plaintext highlighter-rouge">~/k8s</code> ÁõÆÂΩï‰∏ãÔºå<code class="language-plaintext highlighter-rouge">cd ~/k8s</code> ÁõÆÂΩïÂêéÊâßË°åÂàùÂßãÂåñÂëΩ‰ª§„ÄÇÔºâ</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kubeadm.k8s.io/v1beta3</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">InitConfiguration</span>
<span class="na">localAPIEndpoint</span><span class="pi">:</span>
  <span class="na">advertiseAddress</span><span class="pi">:</span> <span class="s">192.168.120.1</span>
  <span class="na">bindPort</span><span class="pi">:</span> <span class="m">6443</span>
<span class="na">nodeRegistration</span><span class="pi">:</span>
  <span class="na">criSocket</span><span class="pi">:</span> <span class="s2">"</span><span class="s">unix:///run/containerd/containerd.sock"</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kubeadm.k8s.io/v1beta3</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterConfiguration</span>
<span class="na">kubernetesVersion</span><span class="pi">:</span> <span class="s">stable</span>
<span class="na">imageRepository</span><span class="pi">:</span> <span class="s2">"</span><span class="s">registry.cn-hangzhou.aliyuncs.com/google_containers"</span>
<span class="na">networking</span><span class="pi">:</span>
  <span class="na">podSubnet</span><span class="pi">:</span> <span class="s">192.168.144.0/20</span>
  <span class="na">serviceSubnet</span><span class="pi">:</span> <span class="s">192.168.244.0/24</span>
</code></pre></div></div>

<div class="premonition warning"> <div class="header"> <svg class="icon warning" aria-hidden="true"> <use xlink:href="#icon-warning"></use> </svg> <div class="title"> ÂèãÊÉÖÊèêÈÜí </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉÂ¶ÇÊûúÊ≤°ÊúâÈÖçÁΩÆ‰∏ªÊú∫ÂêçÂØπÂ∫îÁöÑËØùÔºåËøôÈáåÂàùÂßãÂåñ‰ºö‰∏ÄÁõ¥Âç°Âú® API Health Ê£ÄÊµãÁöÑÊ≠•È™§ÔºåÂÆûÈôÖ‰∏äÊòØÂõ†‰∏∫Ê≤°Êúâ‰∏ªÊú∫ÂêçÂíå IP ÂØπÂ∫îËÄåÊó†Ê≥ïÂêØÂä® API Server„ÄÇ</p>



 </div> </div>
<p>‚ÄÉ‚ÄÉkubeadm ÂàùÂßãÂåñÊàêÂäüÂêéÈúÄË¶ÅÂ§çÂà∂È™åËØÅÊñá‰ª∂ÊâçËÉΩÂú®ÊéßÂà∂ËäÇÁÇπÁÆ°ÁêÜ K8S ÈõÜÁæ§ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Â§çÂà∂È™åËØÅÊñá‰ª∂</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.kube
<span class="nb">sudo cp</span> <span class="nt">-i</span> /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
<span class="nb">sudo chown</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">id</span> <span class="nt">-g</span><span class="si">)</span> <span class="nv">$HOME</span>/.kube/config

<span class="c"># Êü•ËØ¢ËäÇÁÇπÁä∂ÊÄÅ</span>
kubectl get nodes <span class="nt">-o</span> wide
</code></pre></div></div>

<h4 id="Â∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§">Â∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§</h4>

<p>‚ÄÉ‚ÄÉÂàöÊâçÂàùÂßãÂåñÈõÜÁæ§Âêé‰ºöÂá∫Áé∞Â∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§ÁöÑÂëΩ‰ª§ÔºåÂΩ¢Â¶ÇÔºö</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubeadm <span class="nb">join </span>192.168.120.1:6443 <span class="nt">--token</span> z9sdsdi.tdeu74psxqi8rhdt <span class="se">\</span>
    <span class="nt">--discovery-token-ca-cert-hash</span> sha256:87c4f8dd9dabaf2e5e793c0404c74dd8f9f56153000dad3c1a3238a3e8b0beff
</code></pre></div></div>

<p>‚ÄÉ‚ÄÉÊ≥®ÊÑèËøôÈáåÈúÄË¶ÅÂä†‰∏ä <code class="language-plaintext highlighter-rouge">sudo</code> ‰πãÂêéÂÜçÂú®Â∑•‰ΩúËäÇÁÇπ‰∏äÊâßË°åÂä†ÂÖ•ÈõÜÁæ§Êìç‰Ωú„ÄÇÂä†ÂÖ•ÂÆåÊàêÂêéÂèØ‰ª•Âú®ÊéßÂà∂ËäÇÁÇπ‰∏ä‰ΩøÁî® <code class="language-plaintext highlighter-rouge">kubectl get nodes -o wide</code> Êü•ÁúãÊòØÂê¶Êúâ‰∫ÜÂàöÂä†ÂÖ•ÁöÑÂ∑•‰ΩúËäÇÁÇπÁöÑ‰ø°ÊÅØ„ÄÇÁî±‰∫éÁõÆÂâçËøòÊ≤°ÊúâÈÖçÁΩÆÁΩëÁªúÁªÑ‰ª∂ÔºåÈô§‰∫ÜÊéßÂà∂ËäÇÁÇπÂ§ñÔºåÂÖ∂‰ªñÂ∑•‰ΩúËäÇÁÇπÂ∫îËØ•Âùá‰∏∫ <code class="language-plaintext highlighter-rouge">NotReady</code> Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûú‰ΩøÁî® <code class="language-plaintext highlighter-rouge">kubectl get pods --all-namespaces</code> ÂëΩ‰ª§Êü•ÁúãÊâÄÊúâÂêØÂä®ÁöÑ PodÔºåÂ∫îËØ•ÁúãÂà∞Èô§‰∏§‰∏™ CordDNS ÁöÑ Pod (ÊØîÂ¶Ç <code class="language-plaintext highlighter-rouge">0/1</code>) ‰ª•Â§ñÁöÑÊâÄÊúâ Pod ÁöÑÁä∂ÊÄÅÈÉΩÊòØÂÆåÊàêÂêØÂä® (ÊØîÂ¶Ç <code class="language-plaintext highlighter-rouge">1/1</code>)„ÄÇ</p>

<p>‚ÄÉ‚ÄÉÂ∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÂêéÂèØ‰ª•ÈÖçÁΩÆ‰∏çÂêåÁöÑÊ†áÁ≠æÔºåÊØîÂ¶ÇÂ¶Ç‰∏ãÊòØÈÖçÁΩÆ‰∏∫Â∑•‰ΩúËäÇÁÇπÂíåÊ∑ªÂä† <code class="language-plaintext highlighter-rouge">gputype</code> Â≠óÊÆµÊ†áÁ≠æÔºö</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubectl label node vm02 node-role.kubernetes.io/worker<span class="o">=</span>
kubectl label node vm03 node-role.kubernetes.io/worker<span class="o">=</span>
kubectl label node vm02 <span class="nv">gputype</span><span class="o">=</span>P100
kubectl label node vm03 <span class="nv">gputype</span><span class="o">=</span>A100
</code></pre></div></div>

<h3 id="Ê∑ªÂä†ÁªÑ‰ª∂">Ê∑ªÂä†ÁªÑ‰ª∂</h3>

<h4 id="ÈÖçÁΩÆ-calico-ÁΩëÁªú">ÈÖçÁΩÆ Calico ÁΩëÁªú</h4>

<p>‚ÄÉ‚ÄÉCalico ÊîØÊåÅ‰∏ÄÂ•óÁÅµÊ¥ªÁöÑÁΩëÁªúÈÄâÈ°πÔºåÂèØ‰ª•Ê†πÊçÆÊÉÖÂÜµÈÄâÊã©ÊúÄÊúâÊïàÁöÑÈÄâÈ°πÔºåÂåÖÊã¨ÈùûË¶ÜÁõñÂíåË¶ÜÁõñÁΩëÁªúÔºåÂ∏¶Êàñ‰∏çÂ∏¶ BGP„ÄÇCalico ‰ΩøÁî®Áõ∏ÂêåÁöÑÂºïÊìé‰∏∫‰∏ªÊú∫„ÄÅPod ÂíåÂ∫îÁî®Á®ãÂ∫èÂú®ÊúçÂä°ÁΩëÊ†ºÂ±ÇÊâßË°åÁΩëÁªúÁ≠ñÁï•„ÄÇÂ¶Ç‰∏ãÊâÄÁ§∫ÂèØ‰ª•ÂæàÁÆÄÂçïÂú∞‰∏∫ K8S ÈõÜÁæ§ÂêØÁî® Calico ÁΩëÁªúÔºö</p>

<ol>
  <li>ÂàõÂª∫ Calico ÊâÄÈúÄÁöÑ operatorÔºàÈúÄË¶ÅÈïúÂÉè <code class="language-plaintext highlighter-rouge">quay.io/tigera/operator:v1.34.5</code>ÔºåÂèØÊèêÂâç‰∏ãËΩΩÔºâÔºå‰ªÖÂú®ÊéßÂà∂ËäÇÁÇπÂàõÂª∫ PodÔºõ</li>
  <li>ÂàõÂª∫ÂíåÂàùÂßãÂåñ K8S ÈõÜÁæ§Êó∂ÂØπÂ∫îÁöÑÁΩëÁªúËßÑÂàíÔºå‰∏ªË¶ÅÊòØ PodSubset ÈÖçÁΩÆÔºåÂ¶Ç‰∏ãÈù¢‰øÆÊîπËøáÁöÑ yaml ÈÖçÁΩÆÊñá‰ª∂„ÄÇËøôÈáå‰∏∫‰∫ÜÂä†ÈÄüÂàõÂª∫ËøáÁ®ãÔºåËøòÊ∑ªÂä†‰∫Ü <code class="language-plaintext highlighter-rouge">registry</code> Â≠óÊÆµÊù•‰ΩøÁî® DaoCloud Âä†ÈÄüÂô®„ÄÇ</li>
</ol>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/k8s/calico &amp; <span class="nb">cd</span> ~/k8s/calico
wget <span class="nt">-c</span> https://raw.githubusercontent.com/projectcalico/calico/v3.28.1/manifests/tigera-operator.yaml
wget <span class="nt">-c</span> https://raw.githubusercontent.com/projectcalico/calico/v3.28.1/manifests/custom-resources.yaml 
kubectl create <span class="nt">-f</span> tigera-operator.yaml 
kubectl create <span class="nt">-f</span> custom-resources.yaml
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># This section includes base Calico installation configuration.</span>
<span class="c1"># For more information, see: https://docs.tigera.io/calico/latest/reference/installation/api#operator.tigera.io/v1.Installation</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operator.tigera.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Installation</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="c1"># Configures Calico networking.</span>
  <span class="na">calicoNetwork</span><span class="pi">:</span>
    <span class="na">ipPools</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">default-ipv4-ippool</span>
      <span class="na">blockSize</span><span class="pi">:</span> <span class="m">26</span>
      <span class="na">cidr</span><span class="pi">:</span> <span class="s">192.168.144.0/20</span>
      <span class="na">encapsulation</span><span class="pi">:</span> <span class="s">VXLANCrossSubnet</span>
      <span class="na">natOutgoing</span><span class="pi">:</span> <span class="s">Enabled</span>
      <span class="na">nodeSelector</span><span class="pi">:</span> <span class="s">all()</span>
  <span class="na">registry</span><span class="pi">:</span> <span class="s">m.daocloud.io</span>
<span class="nn">---</span>

<span class="c1"># This section configures the Calico API server.</span>
<span class="c1"># For more information, see: https://docs.tigera.io/calico/latest/reference/installation/api#operator.tigera.io/v1.APIServer</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">operator.tigera.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">APIServer</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">spec</span><span class="pi">:</span> <span class="pi">{}</span>
</code></pre></div></div>

<p>‚ÄÉ‚ÄÉÂ¶ÇÊûúÈÄöËøá <code class="language-plaintext highlighter-rouge">kubectl get pod --all-namespaces</code> ÂèëÁé∞Âì™‰∏™Áõ∏ÂÖ≥ Pod Âç°Âú®‰∫ÜÊãâÂèñÈïúÂÉèÁöÑÊ≠•È™§ÔºåÂèØ‰ª•ÊâãÂä®ÈïúÂÉè„ÄÇ‰∏ÄËà¨Êù•ËØ¥Ôºå‰ΩøÁî®‰øÆÊîπÁöÑ DaoCloud Âä†ÈÄüÂô®‰∏ãËΩΩÂ∫îËØ•Ê≤°‰ªÄ‰πàÂ§™Â§ßÈóÆÈ¢ò„ÄÇÂàõÂª∫ Calico ÁΩëÁªúÂÆåÊàêÂêé‰ºöÂ§öÂá∫Êù• 3 ‰∏™ÂëΩÂêçÁ©∫Èó¥: <code class="language-plaintext highlighter-rouge">tigera-operator</code>„ÄÅ <code class="language-plaintext highlighter-rouge">calico-system</code> Âíå <code class="language-plaintext highlighter-rouge">calico-apiserver</code>„ÄÇÊñ∞Â¢ûÁöÑ Pod Â∫îËØ•Â¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ËäÇÁÇπ‰∏ªÊú∫Âêç</th>
      <th style="text-align: left">Êñ∞Â¢û Pod</th>
      <th style="text-align: left">Â§áÊ≥®</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">tigera-operator</td>
      <td style="text-align: left">Calico ÁΩëÁªúÊâÄÈúÄÁöÑÊèèËø∞Â≠ê</td>
    </tr>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">calico-kube-controller</td>
      <td style="text-align: left">Calico ÁΩëÁªúÊéßÂà∂Âô®</td>
    </tr>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">calico-apiserver</td>
      <td style="text-align: left">Calico ÁΩëÁªú APIÔºå‰∏ÄËà¨Êúâ‰∏§‰∏™ Pod</td>
    </tr>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">calico-typha</td>
      <td style="text-align: left">‰ºòÂåñÂíåÂáèÂ∞ë Calico ÂØπ K8S API ÊúçÂä°Âô®ÁöÑË¥üËΩΩ</td>
    </tr>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">calico-node</td>
      <td style="text-align: left">Calico ÁΩëÁªúËäÇÁÇπÂÆ¢Êà∑Á´Ø</td>
    </tr>
    <tr>
      <td style="text-align: center">vm01</td>
      <td style="text-align: left">csi-node-driver</td>
      <td style="text-align: left">CSI È©±Âä®</td>
    </tr>
    <tr>
      <td style="text-align: center">vm02</td>
      <td style="text-align: left">calico-typha</td>
      <td style="text-align: left">‰ºòÂåñÂíåÂáèÂ∞ë Calico ÂØπ K8S API ÊúçÂä°Âô®ÁöÑË¥üËΩΩ</td>
    </tr>
    <tr>
      <td style="text-align: center">vm02</td>
      <td style="text-align: left">calico-node</td>
      <td style="text-align: left">Calico ÁΩëÁªúËäÇÁÇπÂÆ¢Êà∑Á´Ø</td>
    </tr>
    <tr>
      <td style="text-align: center">vm02</td>
      <td style="text-align: left">csi-node-driver</td>
      <td style="text-align: left">CSI È©±Âä®</td>
    </tr>
    <tr>
      <td style="text-align: center">vm03</td>
      <td style="text-align: left">calico-node</td>
      <td style="text-align: left">Calico ÁΩëÁªúËäÇÁÇπÂÆ¢Êà∑Á´Ø</td>
    </tr>
    <tr>
      <td style="text-align: center">vm03</td>
      <td style="text-align: left">csi-node-driver</td>
      <td style="text-align: left">CSI È©±Âä®</td>
    </tr>
  </tbody>
</table>

<h4 id="ÈÖçÁΩÆ-nfs-csi-È©±Âä®ÂíåÂ≠òÂÇ®Á±ª">ÈÖçÁΩÆ NFS CSI È©±Âä®ÂíåÂ≠òÂÇ®Á±ª</h4>

<p>‚ÄÉ‚ÄÉNFS CSI È©±Âä®Áî± <a href="https://github.com/kubernetes-csi/csi-driver-nfs" rel="nofollow" target="_blank" class="extlinks">kubernetes-csi/csi-driver-nfs</a> È°πÁõÆÊèê‰æõÊîØÊåÅ„ÄÇ‰∏çËøáÂú®Ê≠£ÂºèÂÆâË£ÖÈ©±Âä®‰πãÂâçÈúÄË¶ÅÂÖàÂÆâË£Ö NFS ÂÆ¢Êà∑Á´ØÔºåÂê¶Âàô NFS CSI È©±Âä®‰πüÊó†Ê≥ïÊ≠£Â∏∏ÂêØÁî®„ÄÇ‰∏∫‰∫ÜÂä†ÈÄü‰∏ãËΩΩÂÆπÂô®ÈïúÂÉèÔºåËøôÈáåÊé®ËçêÂ∞ÜÈÖçÁΩÆ‰∏≠ÁöÑ <code class="language-plaintext highlighter-rouge">registry.k8s.io</code> Ê∫êÂàáÊç¢Âà∞ <code class="language-plaintext highlighter-rouge">k8s.m.daocloud.io</code> Âä†ÈÄüÂô®„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Âú®ÊâÄÊúâËäÇÁÇπÂÆâË£Ö NFS ÂÆ¢Êà∑Á´ØÊîØÊåÅ</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> nfs-common

<span class="c"># ‰∏ãËΩΩ NFS CSI Driver ÈÖçÁΩÆÊñá‰ª∂</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/k8s/csi <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ~/k8s/csi
git clone https://github.com/kubernetes-csi/csi-driver-nfs.git 

<span class="c"># ‰øÆÊîπÂÆπÂô®ÈïúÂÉè‰∏∫ DaoCloud Âä†ÈÄüÂô®</span>
<span class="nb">cd </span>csi-driver-nfs/deploy/v4.9.0
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/registry.k8s.io/k8s.m.daocloud.io/"</span> ./<span class="k">*</span>

<span class="c"># ËøîÂõû‰∏ä‰∏äÂ±ÇÁõÆÂΩïÔºåÂπ∂ÂÆâË£Ö NFS CSI È©±Âä®</span>
<span class="nb">cd</span> ../../
./deploy/install-driver.sh v4.9.0 <span class="nb">local</span> 
</code></pre></div></div>

<p>‚ÄÉ‚ÄÉÂÆâË£Ö NFS CSI È©±Âä®Âêé‰ºöÂú® <code class="language-plaintext highlighter-rouge">kube-system</code> ÂëΩÂêçÁ©∫Èó¥‰∏≠Â§öÂá∫Âõõ‰∏™ PodÔºåÂÖ∂‰∏≠‰∏Ä‰∏™ Pod ‰∏∫ <code class="language-plaintext highlighter-rouge">csi-nfs-controller</code>ÔºåÂÖ∂‰ªñÊØè‰∏™ËäÇÁÇπ‰∏Ä‰∏™ <code class="language-plaintext highlighter-rouge">csi-nfs-node</code> ÁöÑ Pod„ÄÇÁÑ∂ÂêéÈúÄË¶Å‰ΩøÁî® <code class="language-plaintext highlighter-rouge">kubectl apply -f nfs.yaml</code> ÂëΩ‰ª§ÂàõÂª∫‰∏Ä‰∏™ NFS ÁöÑÂ≠òÂÇ®Á±ªÁî®‰∫éÊèê‰æõÁªôÂ∫îÁî®Á®ãÂ∫èÔºåÈÖçÁΩÆÊñá‰ª∂ <code class="language-plaintext highlighter-rouge">nfs.yaml</code> ÂÜÖÂÆπÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">storage.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StorageClass</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-csi</span>
  <span class="na">annotations</span><span class="pi">:</span>
    <span class="na">storageclass.kubernetes.io/is-default-class</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
<span class="na">provisioner</span><span class="pi">:</span> <span class="s">nfs.csi.k8s.io</span>
<span class="na">parameters</span><span class="pi">:</span>
  <span class="na">server</span><span class="pi">:</span> <span class="s">nfs_server_ip</span>
  <span class="na">share</span><span class="pi">:</span> <span class="s">/home/data</span>
<span class="na">reclaimPolicy</span><span class="pi">:</span> <span class="s">Retain</span>
<span class="na">volumeBindingMode</span><span class="pi">:</span> <span class="s">Immediate</span>
<span class="na">allowVolumeExpansion</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">mountOptions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">async</span>
  <span class="pi">-</span> <span class="s">rsize=32768</span>
  <span class="pi">-</span> <span class="s">wsize=32768</span>
  <span class="pi">-</span> <span class="s">nconnect=8</span>
  <span class="pi">-</span> <span class="s">nfsvers=4.1</span>
  <span class="pi">-</span> <span class="s">hard</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Êü•ÁúãÊñ∞Â¢ûÁöÑÂ≠òÂÇ®Á±ª</span>
‚ï∞‚îÄ<span class="nv">$ </span>kubectl get sc
NAME                PROVISIONER      RECLAIMPOLICY   VOLUMEBINDINGMODE   ALLOWVOLUMEEXPANSION   AGE
nfs-csi <span class="o">(</span>default<span class="o">)</span>   nfs.csi.k8s.io   Retain          Immediate           <span class="nb">true                   </span>4d1h
</code></pre></div></div>

<h4 id="gpu-ÊîØÊåÅ">GPU ÊîØÊåÅ</h4>

<p>‚ÄÉ‚ÄÉK8S ÁöÑ GPU ÊîØÊåÅÊòØÁî± NVIDIA Êèê‰æõÁöÑÔºåÈúÄË¶ÅÂ∑•‰ΩúËäÇÁÇπÂÖàÂÆâË£Ö NVIDIA È©±Âä®ÂíåÂÆπÂô®È©±Âä®ÔºåÂÜçÂú®ÊéßÂà∂ËäÇÁÇπ‰∏äÈÉ®ÁΩ≤ nvidia-device Êèí‰ª∂ÊîØÊåÅ„ÄÇ</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Êü•ÁúãÂèØÂÆâË£Ö NVIDIA È©±Âä®</span>
‚ï∞‚îÄ<span class="nv">$ </span>ubuntu-drivers devices
modalias : pci:v000010DEd000026BAsv000010DEsd00001957bc03sc02i00
vendor   : NVIDIA Corporation
driver   : nvidia-driver-550-open - distro non-free
driver   : nvidia-driver-550 - distro non-free recommended
driver   : nvidia-driver-535-server - distro non-free
driver   : nvidia-driver-535-server-open - distro non-free
driver   : nvidia-driver-535-open - distro non-free
driver   : nvidia-driver-535 - distro non-free
driver   : xserver-xorg-video-nouveau - distro free <span class="nb">builtin</span>

<span class="c"># ÂÆâË£Ö NVIDIA È©±Âä®ÔºåÂπ∂ÈáçÂêØÁîüÊïà</span>
<span class="nb">sudo </span>apt <span class="nb">install</span> <span class="nt">-y</span> nvidia-driver-535
<span class="nb">sudo </span>apt-mark hold nvidia-driver-535

<span class="c"># Ê∑ªÂä† NVIDIA Container Toolkit Ê∫ê</span>
curl <span class="nt">-fsSL</span> https://mirrors.ustc.edu.cn/libnvidia-container/gpgkey | <span class="nb">sudo </span>gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg <span class="se">\</span>
<span class="o">&amp;&amp;</span> curl <span class="nt">-s</span> <span class="nt">-L</span> https://mirrors.ustc.edu.cn/libnvidia-container/stable/deb/nvidia-container-toolkit.list | <span class="se">\</span>
    <span class="nb">sed</span> <span class="s1">'s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g'</span> | <span class="se">\</span>
    <span class="nb">sudo tee</span> /etc/apt/sources.list.d/nvidia-container-toolkit.list

<span class="c"># Êõ¥Êñ∞ËΩØ‰ª∂ÂàóË°®ÁºìÂ≠òÔºåÂÆâË£Ö nvidia-container-toolkit</span>
<span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> nvidia-container-toolkit

<span class="c"># ‰∏∫ containerd ÂÆπÂô®ËøêË°åÊó∂Â¢ûÂä† NVIDIA ÈÄâÈ°π</span>
<span class="nb">sudo </span>nvidia-ctk runtime configure <span class="nt">--runtime</span><span class="o">=</span>containerd

<span class="c"># ‰øÆÊîπ /etc/containerd/config.toml ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈªòËÆ§ËøêË°åÊó∂‰∏∫ NVIDIA</span>
<span class="c"># ÂéüÊù•ÁöÑÈªòËÆ§ËøêË°åÊó∂ÊòØ runc</span>
<span class="o">[</span>plugins.<span class="s2">"io.containerd.grpc.v1.cri"</span>.containerd]
      default_runtime_name <span class="o">=</span> <span class="s2">"nvidia"</span>

<span class="c"># ÈáçÊñ∞Âä†ËΩΩ containerd ÈÖçÁΩÆÊñá‰ª∂Âπ∂ÈáçÂêØÊúçÂä°ÁîüÊïà</span>
<span class="nb">sudo </span>systemctl daemon-reload
<span class="nb">sudo </span>systemctl restart containerd

<span class="c"># Âú®ÊéßÂà∂ËäÇÁÇπ‰∏∫ K8S ÈõÜÁæ§ÂàõÂª∫ NVIDIA device Êèí‰ª∂ÊîØÊåÅ</span>
<span class="nb">cd</span> ~/k8s
wget <span class="nt">-c</span> https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.16.2/deployments/static/nvidia-device-plugin.yml

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s2">"s/nvcr.io/nvcr.m.daocloud.io/"</span> nvidia-device-plugin.yml
kubectl create <span class="nt">-f</span> nvidia-device-plugin.yml

<span class="c"># È™åËØÅ GPU ÊòØÂê¶Ë¢´ K8S ËØÜÂà´</span>
kubectl describe node vm02 | <span class="nb">grep </span>nvidia.com/gpu:
</code></pre></div></div>

<div class="premonition info"> <div class="header"> <svg class="icon info" aria-hidden="true"> <use xlink:href="#icon-info"></use> </svg> <div class="title"> Â∞èÊèêÁ§∫ </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉNVIDIA GPU È©±Âä®ÂíåÂÆπÂô®È©±Âä®Âè™ÈúÄÂú®Êúâ NVIDIA GPU ÁöÑÂ∑•‰ΩúËäÇÁÇπ‰∏äÈÖçÁΩÆÔºåÂπ∂‰∏î<strong>‰∏ÄÂÆöË¶Å‰øÆÊîπÈªòËÆ§ËøêË°åÊó∂‰∏∫ NVIDIA</strong>ÔºåÂê¶ÂàôÊó†Ê≥ïË¢´ K8S ËØÜÂà´„ÄÇNVIDIA device Êèí‰ª∂ÊîØÊåÅÂú®ÊéßÂà∂ËäÇÁÇπ‰∏äÊèê‰∫§ÂÆâË£ÖËØ∑Ê±Ç‰ΩÜ‰ºöÂú®ÊØè‰∏Ä‰∏™Â∑•‰ΩúËäÇÁÇπ‰∏äÂÆâË£ÖÔºåÂç≥‰ΩøÊ≤°Êúâ NVIDIA GPU Â≠òÂú®„ÄÇ</p>



 </div> </div>
<h2 id="ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢òÂíåËß£Á≠î">ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢òÂíåËß£Á≠î</h2>

<div class="premonition info"> <div class="header"> <svg class="icon info" aria-hidden="true"> <use xlink:href="#icon-info"></use> </svg> <div class="title"> Â¶ÇÊûúÂêÑËäÇÁÇπÊú¨Ë∫´Ê≤°Êúâ‰ªª‰ΩïÁΩëÁªúÔºåÈúÄË¶Å‰ΩøÁî®ÂÜÖÈÉ® HTTP ‰ª£ÁêÜ‰∏äÁΩëÊÄé‰πàÂäûÔºü </div> </div> <div class="content"> <p>‚ÄÉ‚ÄÉËøôÁßçÊÉÖÂÜµ‰∏ãÈúÄË¶Å‰∏∫ kubelet Âíå containerd ÁöÑ service ËÆæÁΩÆ‰ª£ÁêÜ„ÄÇkubelet ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏∫ <code class="language-plaintext highlighter-rouge">/usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf</code>Ôºåcontainerd ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏∫ <code class="language-plaintext highlighter-rouge">/usr/lib/systemd/system/containerd.service</code>„ÄÇÈÖçÁΩÆÂÜÖÂÆπÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇÈÖçÁΩÆÂÆåÂêéÈúÄË¶Å‰ΩøÁî® <code class="language-plaintext highlighter-rouge">sudo systemctl daemon-reload</code> Êù•Â∫îÁî®ÈÖçÁΩÆÊõ¥ÊîπÔºåÂπ∂‰∏î‰ΩøÁî® <code class="language-plaintext highlighter-rouge">sudo systemctl restart kubelet</code> Âíå <code class="language-plaintext highlighter-rouge">sudo systemctl restart containerd</code> ÈáçÂêØÊúçÂä°„ÄÇ</p>



 </div> </div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># sudo vim /usr/lib/systemd/system/containerd.service</span>
<span class="c"># sudo vim /usr/lib/systemd/system/kubelet.service.d/10-kubeadm.conf</span>

<span class="o">[</span>Service]
...
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HTTP_PROXY=http://proxy.ip:3128"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"HTTPS_PROXY=http://proxy.ip:3128"</span>
<span class="nv">Environment</span><span class="o">=</span><span class="s2">"NO_PROXY=localhost,127.0.0.1"</span>
</code></pre></div></div>

<h2 id="ÁªìËØ≠">ÁªìËØ≠</h2>

<p>‚ÄÉ‚ÄÉK8S ÈõÜÁæ§ÁöÑÊê≠Âª∫Âπ∂Èùû‰∏Ä‰ª∂ÂçÅÂàÜÂ§çÊùÇÁöÑ‰∫ãÊÉÖÔºåÊØîËæÉÂ§çÊùÇÁöÑÊòØÊ†πÊçÆÂÆûÈôÖÁöÑÈúÄÊ±ÇÂíåËá™Â∑±ÂØπ‰∫é K8S ÁöÑÁêÜËß£Êù•Êê≠Âª∫Âá∫Êõ¥ÂêàÈÄÇÁöÑ K8S ÈõÜÁæ§„ÄÇËôΩÁÑ∂ K8S ÈõÜÁæ§Â∑≤ÁªèÈÄêÊ≠•ÂºÄÂßãÂèñ‰ª£‰∏ÄËà¨ÁöÑ Docker ÂçïÊú∫Â∫îÁî®ÊúçÂä°ÈÉ®ÁΩ≤ÊñπÊ°àÔºå‰ΩÜÊòØÂ∞±‰∏™‰∫∫ÂÆûÈôÖÁöÑÂ∫îÁî®ËßÑÊ®°ÊàñËÄÖÂ∫îÁî®Êú¨Ë∫´ËÄåË®ÄÔºåK8S ÈõÜÁæ§Êú¨Ë∫´ÁöÑÁª¥Êä§ÂíåË∞ÉÊï¥ÁöÑ‰ª£‰ª∑Ë¶ÅËøúÈ´ò‰∫é Docker ÂçïÊú∫Â∫îÁî®ÊúçÂä°ÈÉ®ÁΩ≤„ÄÇÂ¶ÇÊûúÊòØÊúâÈ´òÂèØÁî®ÊÄß„ÄÅÈ´òÂèØÈù†ÊÄßÁ≠âÁöÑÈúÄÊ±ÇÔºåÈÇ£‰πà K8S ÂèØËÉΩÊòØÁõÆÂâçÊúÄÂ•ΩÁöÑÈúÄÊ±Ç„ÄÇ</p>

<p>‚ÄÉ‚ÄÉÊ≠£Â¶ÇÂú®ÂâçË®Ä‰∏≠ÊâÄËø∞ÔºåÊúâ‰∫Ü K8S ÊåÅÁª≠ÂºÄÂèë„ÄÅÊåÅÁª≠ÈõÜÊàêÂíåÊåÅÁª≠ÈÉ®ÁΩ≤Êàê‰∏∫‰∫ÜÁé∞ÂÆûÔºåÂºÄÂèëËÄÖÂèØ‰ª•ÊääÊõ¥Â§öÁöÑÊ≥®ÊÑèÂäõÈÉΩÊîæÂú®Â∫îÁî®‰ª£Á†ÅÂºÄÂèë„ÄÇÂêåÊó∂ÔºåÁ±ª‰ºº‰∫é JupyterHub ËøôÁ±ª‰ºöÊúâÂä®ÊÄÅÊâ©Â±ïÂíåÂàÜÈÖçËµÑÊ∫êÈúÄÊ±ÇÁöÑÂ∫îÁî®ÔºåÊúÄ‰Ω≥ÁöÑÈÉ®ÁΩ≤ÊñπÂºèÂèØËÉΩÂ∞±ÊòØ K8S ‰∫Ü„ÄÇÂΩìÁÑ∂ÔºåÂê¨ËØ¥Áé∞Âú®ÁöÑÂ§ßÊ®°Âûã ChatGPT Á≠â‰πüÈÉΩÊòØÂú® K8S ‰∏äËÆ≠ÁªÉÂá∫Êù•ÁöÑ„ÄÇ</p>

<p>‚ÄÉ‚ÄÉK8S ÁöÑÁ°ÆÊòØÂ§ßÊúâÂèØ‰∏∫ÔºÅ</p>

<h2 id="ÂèÇËÄÉËµÑÊñô">ÂèÇËÄÉËµÑÊñô</h2>

<ol>
  <li><a href="https://www.blackduck.com/en-us/glossary/what-is-continuous-development.html" rel="nofollow" target="_blank" class="extlinks">Continuous Development</a></li>
  <li><a href="https://aws.amazon.com/cn/devops/continuous-integration/" rel="nofollow" target="_blank" class="extlinks">AWS ‚Äì ‰ªÄ‰πàÊòØÊåÅÁª≠ÈõÜÊàêÔºü</a></li>
  <li><a href="https://www.ibm.com/topics/continuous-deployment" rel="nofollow" target="_blank" class="extlinks">IBM ‚Äì What is continuous deployment?</a></li>
  <li><a href="https://circleci.com/blog/docker-swarm-vs-kubernetes/" rel="nofollow" target="_blank" class="extlinks">Docker Swarm vs Kubernetes: how to choose a container orchestration tool</a></li>
  <li><a href="https://zh.wikipedia.org/zh-cn/Kubernetes" rel="nofollow" target="_blank" class="extlinks">Áª¥Âü∫ÁôæÁßë ‚Äì Kubernetes</a></li>
  <li><a href="https://www.ibm.com/blogs/solutions/jp-ja/container-cocreation-center-05/" rel="nofollow" target="_blank" class="extlinks">IBM ‚Äì Á¨¨5Âõû „ÄéRed Hat OpenShift „Å® Kubernetes „ÅÆÈÅï„ÅÑ„Äè</a></li>
  <li><a href="https://kubernetes.io/zh-cn/docs/concepts/architecture/" rel="nofollow" target="_blank" class="extlinks">Kubernetes ÊñáÊ°£ - Ê¶ÇÂøµ - Kubernetes Êû∂ÊûÑ</a></li>
  <li><a href="https://cloud.tencent.com/developer/article/1852347" rel="nofollow" target="_blank" class="extlinks">Âü∫‰∫é Containerd ËøêË°åÊó∂Êê≠Âª∫ Kubernetes ÈõÜÁæ§ÂÆûË∑µ</a></li>
</ol>

                <div class="post-copyright">
                    <p>
                        <span>ÁâàÊùÉÂ£∞ÊòéÔºö</span>
                        Â¶ÇÊó†ÁâπÂà´Â£∞ÊòéÔºåÊú¨ÊñáÁâàÊùÉÂΩí
                        <a href="https://lisz.me" class="cplink">‰ª≤ÂÑøÁöÑËá™ÁïôÂú∞</a>
                        ÊâÄÊúâÔºåËΩ¨ËΩΩËØ∑Ê≥®ÊòéÊú¨ÊñáÈìæÊé•„ÄÇ
                    </p>
                    
                    <p>
                        ÔºàÈááÁî® 
                        <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" class="extlinks">CC
                            BY-NC-SA 4.0</a>
                        ËÆ∏ÂèØÂçèËÆÆËøõË°åÊéàÊùÉÔºâ
                    </p>
                    
                    <p><span>Êú¨ÊñáÊ†áÈ¢òÔºö</span>„Ää Kubernetes ‰∏çÂÆåÂÖ®ÂÖ•Èó® „Äã</p>
                    <p><span>Êú¨ÊñáÈìæÊé•Ôºö</span><a href="https://lisz.me/tech/k8s/k8s-introduction.html" class="cplink">https://lisz.me/tech/k8s/k8s-introduction.html</a></p>
                    <p class="tips">Êú¨ÊñáÊúÄÂêé‰∏ÄÊ¨°Êõ¥Êñ∞‰∏∫ <span></span> Â§©ÂâçÔºåÊñáÁ´†‰∏≠ÁöÑÊüê‰∫õÂÜÖÂÆπÂèØËÉΩÂ∑≤ËøáÊó∂ÔºÅ
                    </p>
                </div>
            </article>
        </div>
        
            <div class="table-of-contents">
                <div class="toc-header"><h2>ÁõÆÂΩï</h2></div>
                <div class="toc-body">
                    <ul><li><a onclick="scrollToAdjust('ÂâçË®Ä')">ÂâçË®Ä</a><ul><li><a onclick="scrollToAdjust('ÂÆû‰æãËß£Êûê')">ÂÆû‰æãËß£Êûê</a></li></ul></li><li><a onclick="scrollToAdjust('kubernetes-Êû∂ÊûÑ')">Kubernetes Êû∂ÊûÑ</a><ul><li><a onclick="scrollToAdjust('ÁªÑÊàêÈÉ®ÂàÜ')">ÁªÑÊàêÈÉ®ÂàÜ</a></li></ul></li><li><a onclick="scrollToAdjust('Êê≠Âª∫-k8s-ÈõÜÁæ§')">Êê≠Âª∫ K8S ÈõÜÁæ§</a><ul><li><a onclick="scrollToAdjust('Âü∫Êú¨ÂáÜÂ§á')">Âü∫Êú¨ÂáÜÂ§á</a><ul><li><a onclick="scrollToAdjust('ÂÖ≥Èó≠-swap-‰∫§Êç¢ÂàÜÂå∫')">ÂÖ≥Èó≠ SWAP ‰∫§Êç¢ÂàÜÂå∫</a></li><li><a onclick="scrollToAdjust('ÂºÄÂêØ-ipv4-ËΩ¨Âèë')">ÂºÄÂêØ IPv4 ËΩ¨Âèë</a></li><li><a onclick="scrollToAdjust('ÈÖçÁΩÆ‰∏ªÊú∫ÂêçÂØπÂ∫î')">ÈÖçÁΩÆ‰∏ªÊú∫ÂêçÂØπÂ∫î</a></li><li><a onclick="scrollToAdjust('ÂêåÊ≠•Êó∂Èó¥')">ÂêåÊ≠•Êó∂Èó¥</a></li></ul></li><li><a onclick="scrollToAdjust('ÂÆâË£ÖÂøÖË¶ÅËΩØ‰ª∂ÂíåÂ∑•ÂÖ∑')">ÂÆâË£ÖÂøÖË¶ÅËΩØ‰ª∂ÂíåÂ∑•ÂÖ∑</a><ul><li><a onclick="scrollToAdjust('ÂÆâË£Ö-containerd')">ÂÆâË£Ö containerd</a></li><li><a onclick="scrollToAdjust('ÈÖçÁΩÆ-containerd')">ÈÖçÁΩÆ containerd</a></li><li><a onclick="scrollToAdjust('ÂÆâË£Ö-kubeadm-Á≠â')">ÂÆâË£Ö kubeadm Á≠â</a></li></ul></li><li><a onclick="scrollToAdjust('ÂàùÂßãÂåñÈõÜÁæ§')">ÂàùÂßãÂåñÈõÜÁæ§</a><ul><li><a onclick="scrollToAdjust('È¢Ñ‰∏ãËΩΩÈïúÂÉè')">È¢Ñ‰∏ãËΩΩÈïúÂÉè</a></li><li><a onclick="scrollToAdjust('ÂàùÂßãÂåñÊéßÂà∂ËäÇÁÇπ')">ÂàùÂßãÂåñÊéßÂà∂ËäÇÁÇπ</a></li><li><a onclick="scrollToAdjust('Â∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§')">Â∑•‰ΩúËäÇÁÇπÂä†ÂÖ•ÈõÜÁæ§</a></li></ul></li><li><a onclick="scrollToAdjust('Ê∑ªÂä†ÁªÑ‰ª∂')">Ê∑ªÂä†ÁªÑ‰ª∂</a><ul><li><a onclick="scrollToAdjust('ÈÖçÁΩÆ-calico-ÁΩëÁªú')">ÈÖçÁΩÆ Calico ÁΩëÁªú</a></li><li><a onclick="scrollToAdjust('ÈÖçÁΩÆ-nfs-csi-È©±Âä®ÂíåÂ≠òÂÇ®Á±ª')">ÈÖçÁΩÆ NFS CSI È©±Âä®ÂíåÂ≠òÂÇ®Á±ª</a></li><li><a onclick="scrollToAdjust('gpu-ÊîØÊåÅ')">GPU ÊîØÊåÅ</a></li></ul></li></ul></li><li><a onclick="scrollToAdjust('ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢òÂíåËß£Á≠î')">ÂèØËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢òÂíåËß£Á≠î</a></li><li><a onclick="scrollToAdjust('ÁªìËØ≠')">ÁªìËØ≠</a></li><li><a onclick="scrollToAdjust('ÂèÇËÄÉËµÑÊñô')">ÂèÇËÄÉËµÑÊñô</a></li></ul>
                </div>
        
            </div>
        </div>
        
<div class="social-share-wrapper">
    <div class="social-share"></div>
</div>

</main>

<section class="author-detail">
    <section class="post-footer-item author-card">
        <div class="avatar">
            <img src="/assets/img/profile.webp" alt="">
        </div>
        <div class="author-name" rel="author">zhonger</div>
        <div class="bio">
            <p>Developer & Maintainer</p>
        </div>
        
        <ul class="sns-links">
            
            <li>
                <a href="https://scholar.google.com/citations?user=AUupIooAAAAJ" target="_blank" aria-label="google-scholar">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-google-scholar"></use>
                    </svg>
                </a>
            </li>
            
            <li>
                <a href="https://www.researchgate.net/profile/Shengzhou-Li" target="_blank" aria-label="researchgate">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-researchgate"></use>
                    </svg>
                </a>
            </li>
            
            <li>
                <a href="https://orcid.org/0000-0001-6973-3825" target="_blank" aria-label="ORCID">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-ORCID"></use>
                    </svg>
                </a>
            </li>
            
            <li>
                <a href="https://github.com/zhonger" target="_blank" aria-label="github">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                </a>
            </li>
            
            <li>
                <a href="https://www.linkedin.com/in/shengzhouli/" target="_blank" aria-label="linkedin">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-linkedin"></use>
                    </svg>
                </a>
            </li>
            
            <li>
                <a href="https://segmentfault.com/u/wuwozhonger" target="_blank" aria-label="segmentfault">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-segmentfault"></use>
                    </svg>
                </a>
            </li>
            
        </ul>
        
    </section>
    <section class="post-footer-item read-next">
        
        <div class="read-next-item">
            <a href="/ac/qc/solve-quantum-chemistry-by-hand-1-1.html" class="read-next-link" aria-label="„ÄäÊâãËß£ÈáèÂ≠êÂåñÂ≠¶„ÄãÁªÉ‰π†È¢ò 1-1"></a>
            <section>
                <span>„ÄäÊâãËß£ÈáèÂ≠êÂåñÂ≠¶„ÄãÁªÉ‰π†È¢ò 1-1</span>
                <p>  note ‚ÄúÁªÉ‰π†È¢ò1-1‚ÄùÂà§Êñ≠‰∏ãÈù¢ÁöÑÁÆóÂ≠êÊòØÂê¶ÂéÑÁ±≥ÔºàHermitianÔºâÊàñ‰∏∫ÂéÑÁ±≥ÁÆóÂ≠êÔºàHermite Opera...</p>
            </section>
            
            <div class="filter"></div>
            <img src="https://i.lisz.top/cover/Hqx2QN.webp" alt="">
            
        </div>
        

        
        <div class="read-next-item">
            <a href="/tech/algorithm/bus-ticket.html" class="read-next-link"
                aria-label="ÁîüÊ¥ª‰∏≠ÁöÑÂ∞èÈóÆÈ¢ò‚Äî‚ÄîÂÖ¨‰∫§ËÆ°Ë¥πÈóÆÈ¢ò"></a>
            <section>
                <span>ÁîüÊ¥ª‰∏≠ÁöÑÂ∞èÈóÆÈ¢ò‚Äî‚ÄîÂÖ¨‰∫§ËÆ°Ë¥πÈóÆÈ¢ò</span>
                <p>ÂâçË®Ä</p>
            </section>
            
            <div class="filter"></div>
            <img src="https://i.lisz.top/blog/XzVhEk.webp" alt="">
            
        </div>
        
    </section>
    


































    



    

</section>
            


<footer class="g-footer">
  <div class="g-container">
    <div class="g-left">
      <section class="links">
        Êú¨Á´ôÁî± <a href="//jekyllrb.com" target="_blank" class="extlinks">Jekyll</a> Âíå (Âü∫‰∫é <a href="https://github.com/kaeyleo/jekyll-theme-H2O" target="_blank" class="extlinks">H2O</a> ÁöÑ) <a href="https://github.com/zhonger/jekyll-theme-H2O-ac" target="_blank" class="extlinks">H2O-ac</a> Âº∫ÂäõÈ©±Âä®
         (<a href="https://github.com/zhonger/jekyll-theme-H2O-ac/releases/tag/v1.5.1"
          target="_blank" class="extlinks">v1.5.1</a>)
        
      </section>
      <section class="links">‰ª≤ÂÑøÁöÑËá™ÁïôÂú∞ ¬©
        <input type="hidden" id="footer-since" value="2015">
        <span id="footer-year"></span>
        
        
        <a href="/rss.xml" target="_blank" aria-label="Terms of Service" class="others">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-rss"></use>
          </svg> RSS
        </a>
        <a href="/tos" target="_blank" aria-label="Terms of Service" class="others">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-tos"></use>
          </svg> ‰ΩøÁî®Êù°Ê¨æ
        </a>
      </section>
      
      <section class="links">
        <span id="busuanzi_container_site_pv">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-pv"></use>
          </svg> ÊÄªÊµèËßàÈáè
          
          <span id="busuanzi_site_pv">
            
            <b>¬∑</b>
          </span>
        </span>
        <span id="busuanzi_container_site_uv">
          <svg class="icon" aria-hidden="true">
            <use xlink:href="#icon-user"></use>
          </svg> ÊÄªËÆøÈóÆÈáè
          
          <span id="busuanzi_site_uv"></span>
          
        </span>
      </section>
      
      <section>
        
        Êú¨Á´ôÂ∑≤ËøêË°å
        <span class="alivetime_days"></span> Â§©
        <span class="alivetime_hours"></span> Â∞èÊó∂
        <span class="alivetime_minutes"></span> ÂàÜ
        <span class="alivetime_seconds"></span> Áßí
        
      </section>
    </div>
    <div class="g-right">
      
      
      <section class="badges">
        
        <a href="https://netlify.com" target="_blank" class="netlify" aria-label="netlify">
          <img src="/assets/icons/netlify-icon-light.svg" alt="netlify">
        </a>
        
        
        <a href="https://vercel.com" target="_blank" class="vercel" aria-label="vercel">
          <img src="/assets/icons/vercel-logotype-dark.png" alt="vercel">
        </a>
        
        
        <a href="https://www.cloudflare.com" target="_blank" class="cloudflare" aria-label="cloudflare">
          <img src="/assets/icons/cloudflare-logo.webp" alt="cloudflare">
        </a>
        
      </section>
      
      
      <section class="badges">
        
        <a href="https://www.foreverblog.cn/" target="_blank" class="foreverblog" aria-label="foreverblog">
          <img src="/assets/icons/forever_en_default.png" alt="foreverblog">
        </a>
        
        
        <a href="https://www.foreverblog.cn/go.html" target="_blank" class="wormhole" aria-label="wormhole">
          <img src="/assets/icons/wormhole_3.gif" alt="" title="Á©øÊ¢≠Ëô´Ê¥û-ÈöèÊú∫ËÆøÈóÆÂçÅÂπ¥‰πãÁ∫¶ÂèãÈìæÂçöÂÆ¢">
        </a>
        
        
        <a href="https://www.travellings.cn/go.html" target="_blank" class="travelling-badge" aria-label="Travelling"
          rel="noopener" title="ÂºÄÂæÄ-ÂèãÈìæÊé•Âäõ">
          <img src="/assets/icons/travellings.gif" alt="ÂºÄÂæÄ-ÂèãÈìæÊé•Âäõ">
        </a>
        
        
        <a href="https://notbyai.fyi/" target="_blank" class="notbyAI" aria-label="notbyAI">
          <img src="/assets/icons/notbyAI-white.png" alt="Written by Human, Not by AI">
        </a>
        
      </section>
      
    </div>
    
  </div>
</footer>
<div class="cookie-tip">
   ‰∏∫‰∫ÜÊèêÂçáÊú¨Á´ôÁöÑ‰ΩøÁî®‰ΩìÈ™åÂíåÂøÖË¶ÅÂäüËÉΩÁöÑÊ≠£Â∏∏‰ΩøÁî®ÔºåÊú¨Á´ô‰ºö‰ΩøÁî®Êú¨Âú∞ Cookie„ÄÇËØ¶ÁªÜËØ∑Êü•Áúã„Äå <a href="/tos.html">Êú¨Á´ô‰ΩøÁî®Êù°Ê¨æ</a> „Äç‰∫ÜËß£Êõ¥Â§ö„ÄÇ

  <button id="accept-tos">ÂêåÊÑè</button>
</div>

<section id="tools">
  
  
  <div class="tool toc">
    <svg class="icon b1 active" aria-hidden="true">
      <use xlink:href="#icon-toc"></use>
    </svg>
    <svg class="icon b2" aria-hidden="true">
      <use xlink:href="#icon-exit"></use>
    </svg>
  </div>
  
</section>
<section id="bttb" aria-label="Scroll back to top" class="bttb">
  <div class="tool">
    <svg class="icon top" aria-hidden="true">
      <use xlink:href="#icon-top"></use>
    </svg>
  </div>
</section>
        </div>
        
<div class="modal">
    <div class="modal-content">
        <header>
            <span class="close">&times;</span>
        </header>
        <div class="container"></div>
    </div>
</div>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/lazysizes/lazysizes.min.js" async></script>
        
            <script src="https://cdn.jsdelivr.net/npm/dayjs/dayjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs/plugin/customParseFormat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs/plugin/relativeTime.js"></script>
<script>
    $(document).ready(function () {
        var time_formats = ['YYYY-MM-DD HH:mm:ss ZZ', 'YYYY DD MMM HH:mm:ss ZZ', 'YYYYÂπ¥MMÊúàDDÊó• HH:mm:ss ZZ'];
        function dateFormat(date, format) {
            var date_org = dayjs(date, time_formats[format]);
            var date = date_org.format(time_formats[format]);
            return { "date_org": date_org, "date": date }
        }

        dayjs.extend(window.dayjs_plugin_customParseFormat);
        dayjs.extend(window.dayjs_plugin_relativeTime);
        var post_date = $("meta[property='post-date']").attr('content');
        var post_date_format = $("meta[property='post-date-format']").attr('content');
        var local_post_date = dateFormat(post_date, post_date_format);

        $(".post time span.create-at").html(local_post_date["date"]);

        fetch("https://api.github.com/repos/zhonger/zhonger.github.io/commits?path=_posts/k8s/2024-10-08-k8s-introduction.md").then((response) => {
            return response.json();
        }).then((commits) => {
            if (commits.length != 0) {
                var update_at = dayjs(commits[0]['commit']['committer']['date']);
            } else {
                var update_at = post_date
            }

            var local_update_at = dateFormat(update_at, post_date_format);
            $('.post time span.update-at').html(local_update_at["date"]);

            var relative_time = dayjs().diff(local_update_at["date_org"], 'day');
            $(".post-copyright .tips span").append(relative_time);
            if (relative_time > 365) {
                $(".post-copyright .tips").addClass("active");
            }
        });
    });
</script>
            <script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script>
<script>
    socialShare('.social-share', {
        sites: [
            
            'wechat', 
            
            'weibo', 
            
            'douban', 
            
            'twitter'
            
        ],
    wechatQrcodeTitle: "ÂàÜ‰∫´Âà∞ÂæÆ‰ø°ÊúãÂèãÂúà",
        wechatQrcodeHelper: '<p>Êâ´Á†ÅÂêéÁÇπÂáªÂè≥‰∏äËßí</p><p>Â∞ÜÊú¨ÊñáÂàÜ‰∫´Ëá≥ÊúãÂèãÂúà</p>'
      });
    $("a.social-share-icon").each(function () {
        $(this).attr("aria-label", $(this).attr("class").split(' ')[1])
    });
</script>
        
        <script src="https://cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script>
        <script>
            /**
            * Better Scroll Experience
            */
            function scrollToAdjust(id){
              var element = document.getElementById(id);
              var headerOffset = 90;
              var elementPosition = element.getBoundingClientRect().top;
              var offsetPosition = elementPosition + window.scrollY - headerOffset;
              window.scrollTo({
                  top: offsetPosition,
                  behavior: "smooth"
              });
            }
        </script>
        <script src="/assets/js/app.min.js"></script>
        <script src="https://at.alicdn.com/t/c/font_3046306_ujr2yq34hw.js"></script>
        
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9E8SEJ5JNY"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-9E8SEJ5JNY');
</script>


<script async defer data-website-id="90ea4822-8012-444e-837a-757ea473e087" src="https://umami.lisz.top/pwiki.js"></script>








<script async src="https://busuanzi.lisz.top/js"></script>


        
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax-full/es5/tex-mml-svg.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [['$', '$'], ["\\(", "\\)"]],
			processEscapes: true,
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
		},
		"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
      });
    </script>



<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script>
<script>
    $(document).ready(function () {
        var baseurl = $("meta[property='og:baseurl']").attr('content');
        $("p img").each(function () {
            $(this).attr('data-src', $(this).attr('src')).removeAttr('src').addClass("lazyload").attr('src', baseurl + '/assets/img/loading.gif');
            var strA = "<a data-fancybox='gallery' ref='gallery' href='" + $(this).attr('data-src') + "' data-caption='" + $(this).attr('alt') + "'></a>";
            $(this).wrapAll(strA);
            var caption = $(this)[0].alt;
            $(this).parent().after('<span class="caption">' + caption + '</span>');
        });
        Fancybox.bind('[data-fancybox]', {
            on: {
                load: (fancybox, slide) => {
                    var gray = $("meta[property='og:gray']").attr('content');
                    if (gray == "true") {
                        $(".fancybox__content img").addClass("gray");
                        $(".carousel__track .fancybox__thumb").addClass("gray");
                    }
                }
            }
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/hotkeys-js/dist/hotkeys.min.js"></script>
<script>
    $(document).ready(function () {
        var previous_url = $("meta[property='og:previous_url']").attr('content');
        var next_url = $("meta[property='og:next_url']").attr('content');

        hotkeys('left', function (event, handler) {
            // Prevent the default refresh event under WINDOWS system
            event.preventDefault();
            if (previous_url) {
                console.log('you pressed left!');
                window.location.href = previous_url;
            } else {
                $("#no-previous").addClass("active");
                setTimeout(function () { $("#no-previous").removeClass("active"); }, 1500);
            }
        });

        hotkeys('right', function (event, handler) {
            // Prevent the default refresh event under WINDOWS system
            event.preventDefault();
            if (next_url) {
                console.log('you pressed right!');
                window.location.href = next_url;
            } else {
                $("#no-next").addClass("active");
                setTimeout(function () { $("#no-next").removeClass("active"); }, 1500);
            }
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad: true,
            theme: "default",
        });
        mermaid.init(undefined, $('.mermaid2'));
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>
        




<script>
    $(document).ready(function () {
        if ($(".comment").length == 3) {
            var comment_status = $("#cmn-toggle-4")[0].checked;
            if (comment_status) {
                $(".comment:last > div").addClass("active");
            } else {
                $(".comment:nth-last-child(2) > div").addClass("active");
            }
            $("#cmn-toggle-4").click(function () {
                $(".comment:nth-last-child(2) > div").toggleClass("active");
                $(".comment:last > div").toggleClass("active");
            })
        } else {
            if ($(".comment").length == 2) {
                $(".comment:last > div").addClass("active")
            }
        }
    })
</script>
        <script>
    if ("serviceWorker" in navigator) {
        if (navigator.serviceWorker.controller) {
            console.log("An active service worker found, no need to register");
        } else {
            // Register the service worker
            navigator.serviceWorker
            .register("/sw.js", {
                scope: "/"
            })
            .then(function (reg) {
                console.log("Service worker has been registered for scope: " + reg.scope);
            });
        }
    }

// Ê£ÄÊµãÊµèËßàÂô®ÊòØÂê¶ÊîØÊåÅSW
// if(navigator.serviceWorker != null){
//     navigator.serviceWorker.register("/sw.js")
//         .then(function(registartion){
//             console.log('ÊîØÊåÅsw:',registartion.scope)
//         })
// } else {
//     console.log('‰∏çÊîØÊåÅsw')
// }
</script>
        
<!-- start webpushr code --> <script>(function(w,d, s, id) {if(typeof(w.webpushr)!=='undefined') return;w.webpushr=w.webpushr||function(){(w.webpushr.q=w.webpushr.q||[]).push(arguments)};var js, fjs = d.getElementsByTagName(s)[0];js = d.createElement(s); js.id = id;js.async=1;js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window,document, 'script', 'webpushr-jssdk'));webpushr('setup',{'key':'BF0y1f49JPDkjSmUYtUb-gRzcVY72squyl0hE2xo7YTA4q7Ch2DAZ0WOZCNktfyakgPlDov92CafKw9ZPAwIDrc' });</script><!-- end webpushr code -->

        
<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">
    docsearch({
        appId: "SFGDUYE6XB",
        apiKey: "0f353764aa52c81dd2d893bc669b4f7b",
        indexName: "lisz",
        container: 'li#search',
        debug: true,
    });
    docsearch({
        appId: "SFGDUYE6XB",
        apiKey: "0f353764aa52c81dd2d893bc669b4f7b",
        indexName: "lisz",
        container: '#search-toggle',
        debug: true,
    });
</script>

  </body>

</html>